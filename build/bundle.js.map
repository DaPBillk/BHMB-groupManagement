{"version":3,"file":"bundle.js","sources":["../src/Permissions/Permissions.ts","../src/Groups/Group.ts","../src/Groups/GroupManager.ts","../src/Permissions/Permission.ts","../src/Permissions/PermissionManager.ts","../src/Users/User.ts","../src/Users/UserManager.ts","../src/UI/index.ts","../src/GroupManagement.ts","../src/Extensions/BlockheadsHandler.ts","../src/Extensions/Blockheads.ts","../src/Extensions/GroupManagementHandler.ts","../src/Extensions/GroupManagement.ts","../src/index.ts"],"sourcesContent":["import { PermissionResolvable, Permission } from \"./Permission\";\r\nimport { Group } from \"../Groups/Group\";\r\nimport { User } from \"../Users/User\";\r\n\r\nexport interface PermissionsSaveData {\r\n  allowed: string[],\r\n  disabled: string[]\r\n}\r\n\r\nexport class Permissions {\r\n\r\n  allowed: Set<string>;\r\n\r\n  disabled: Set<string>;\r\n\r\n  parent: Group|User;\r\n  \r\n  constructor (parent : Group|User, permissions? : PermissionsSaveData) {\r\n    const data = permissions || {\r\n      allowed: [],\r\n      disabled: []\r\n    };\r\n\r\n    this.parent = parent;\r\n    this.allowed = new Set(data.allowed);\r\n    this.disabled = new Set(data.disabled);\r\n  }\r\n\r\n  has (permissionResolvable : PermissionResolvable) {\r\n    const permission = this.resolvePermission(permissionResolvable);\r\n    if (!permission) return false;\r\n    return this.allowed.has(permission.id);\r\n  }\r\n\r\n  add (permissionResolvable : PermissionResolvable, sudo : boolean = false, disabled : boolean = false) : boolean {\r\n    const permission = this.resolvePermission(permissionResolvable);\r\n    if (!permission || (this.allowed.has(permission.id) && !disabled && !this.disabled.has(permission.id)) || (this.disabled.has(permission.id) && !sudo)) return false;\r\n    this.allowed.add(permission.id);\r\n    if (disabled && !this.disabled.has(permission.id)) {\r\n      this.disabled.add(permission.id);\r\n    }\r\n    this.save();\r\n    return true;\r\n  }\r\n\r\n  delete (permissionResolvable : PermissionResolvable, sudo : boolean = false, disabled : boolean = false) : boolean {\r\n    const permission = this.resolvePermission(permissionResolvable);\r\n    if (!permission || (!sudo && this.disabled.has(permission.id))) return false;\r\n    const deleted = this.allowed.delete(permission.id);\r\n    const deletedDisabled = disabled ? this.disabled.delete(permission.id) : false;\r\n    this.save();\r\n    return deleted || deletedDisabled;\r\n  }\r\n\r\n  save () {\r\n    return this.parent.save();\r\n  }\r\n\r\n  private resolvePermission (permissionResolvable : PermissionResolvable) : Permission | undefined {\r\n    return this.parent.manager.management.permissions.get(permissionResolvable);\r\n  }\r\n\r\n  get data () : PermissionsSaveData {\r\n    return {\r\n      allowed: Array.from(this.allowed),\r\n      disabled: Array.from(this.disabled)\r\n    };\r\n  }\r\n}","import { Player } from \"@bhmb/bot\";\r\nimport { GroupManager } from \"./GroupManager\";\r\nimport { Permissions, PermissionsSaveData } from \"../Permissions/Permissions\";\r\nimport { User } from \"../Users/User\";\r\n\r\nexport interface GroupData {\r\n  name: string;\r\n  permissions?: PermissionsSaveData;\r\n  players?: (Player|string)[];\r\n  managed?: boolean;\r\n};\r\n\r\nexport interface GroupConstructorData extends GroupData {\r\n  id: number;\r\n};\r\n\r\nexport interface GroupSaveData {\r\n  id: number;\r\n  name: string;\r\n  permissions: PermissionsSaveData\r\n  players: string[],\r\n  managed: boolean\r\n};\r\n\r\nexport type GroupResolvable = Group|string|number;\r\n\r\nexport class Group {\r\n\r\n  id: number;\r\n\r\n  name: string;\r\n\r\n  permissions: Permissions;\r\n\r\n  players: Set<Player>;\r\n\r\n  managed: boolean;\r\n\r\n  manager: GroupManager;\r\n\r\n  tab?: HTMLDivElement;\r\n\r\n  constructor (groupData : GroupConstructorData, manager : GroupManager) {\r\n    this.name = groupData.name;\r\n    this.id = groupData.id;\r\n    this.permissions = new Permissions(this, groupData.permissions);\r\n    this.players = new Set((groupData.players || []).map(playerOrName => typeof playerOrName === \"string\" ? this.manager.management.extension.world.getPlayer(playerOrName) : playerOrName));\r\n    this.managed = groupData.managed || false;\r\n    this.manager = manager;\r\n    this.tab = manager.management.ui.addGroup(this);\r\n\r\n    if (this.manager.management.users) {\r\n      for (const player of this.players) {\r\n        const user = this.manager.management.users.get(player);\r\n        user.groups.add(this);\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * Rename this group, will return if the operation was successful.\r\n   * @param newName New name\r\n   */\r\n  rename (newName : string) : boolean {\r\n    return this.manager.rename(this, newName);\r\n  }\r\n\r\n  /**\r\n   * Add a player to this group. Will return if the operation was successful.\r\n   * @param playerResolvable \r\n   */\r\n  addPlayer (playerResolvable : Player|User|string) {\r\n    const p = this.manager.management.extension.world.getPlayer(typeof playerResolvable === \"string\" ? playerResolvable : playerResolvable.name);\r\n    if (this.players.has(p)) {\r\n      return false;\r\n    } else {\r\n      this.players.add(p);\r\n      return true;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Remove a player from this group. Will return if the operation was successful.\r\n   * @param playerResolvable \r\n   */\r\n  removePlayer (playerResolvable : Player|User|string) {\r\n    const p = this.manager.management.extension.world.getPlayer(typeof playerResolvable === \"string\" ? playerResolvable : playerResolvable.name);\r\n    return this.players.delete(p);\r\n  }\r\n\r\n  /**\r\n   * Delete this group, will return if the operation was successful.\r\n   */\r\n  delete () : boolean {\r\n    return this.manager.delete(this);\r\n  }\r\n\r\n  save () {\r\n    return this.manager.save();\r\n  }\r\n\r\n  /**\r\n   * Get data about the group that can be saved in storage.\r\n   */\r\n  get data () : GroupSaveData {\r\n    return {\r\n      id: this.id,\r\n      name: this.name,\r\n      permissions: this.permissions.data,\r\n      players: Array.from(this.players).map(player => player.name),\r\n      managed: this.managed\r\n    };\r\n  }\r\n}","import { Group, GroupData, GroupResolvable, GroupSaveData } from \"./Group\";\r\nimport { GroupManagement } from \"../GroupManagement\";\r\n\r\nconst SAVE_KEY = \"groups\";\r\n\r\nexport class GroupManager {\r\n\r\n  management: GroupManagement;\r\n\r\n  private _groups: Map<number, Group>;\r\n\r\n  constructor (management : GroupManagement) {\r\n    this.management = management;\r\n    \r\n    this._groups = new Map(this.management.extension.storage.get(SAVE_KEY, []).map((groupData : GroupSaveData) => [groupData.id, new Group(groupData, this)] as [number, Group]));\r\n  }\r\n\r\n  /**\r\n   * Adds a group.\r\n   * @param groupData Data about the group to be added. \r\n   */\r\n  add (groupData : GroupData) : Group|undefined {\r\n    if (!this.get(groupData.name)) {\r\n      const id = this.nextID;\r\n      const group = new Group({id, ...groupData}, this);\r\n      this._groups.set(id, group);\r\n      this.save();\r\n      return group;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Delete a group, will return if the operation was successful.\r\n   * @param groupResolvable Some identifier that can resolve to the group being deleted.\r\n   */\r\n  delete (groupResolvable : GroupResolvable) : boolean {\r\n    const group = this.resolveGroup(groupResolvable);\r\n    if (!group || group.managed) return false;\r\n    this._groups.delete(group.id);\r\n    this.save();\r\n    this.management.ui.deleteGroup(group);\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Retrieve a group.\r\n   * @param groupNameOrID Either the group's name or id.\r\n   */\r\n  get (groupNameOrID? : string|number) : Group|undefined|Map<number, Group> {\r\n    if (groupNameOrID) {\r\n      if (typeof groupNameOrID === \"string\") {\r\n        for (const [, group] of this._groups) {\r\n          if (group.name === groupNameOrID) {\r\n            return group;\r\n          }\r\n        }\r\n      } else {\r\n        return this._groups.get(groupNameOrID);\r\n      }\r\n    } else {\r\n      return this._groups;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Rename a group to another name. Will return if the operation was successful.\r\n   * @param groupResolvable Some identifier that can resolve to become the group to be renamed.\r\n   * @param newName New name of the group.\r\n   */\r\n  rename (groupResolvable : GroupResolvable, newName : string) : boolean {\r\n    const group = this.resolveGroup(groupResolvable);\r\n    if (group && !this.get(newName) && !group.managed) {\r\n      group.name = newName;\r\n      this.save();\r\n      this.management.ui.refreshGroup(group);\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Resolve a group.\r\n   * @param groupResolvable The to be resolved.\r\n   */\r\n  private resolveGroup (groupResolvable : GroupResolvable) : Group|undefined {\r\n    let group;\r\n\r\n    if (typeof groupResolvable === \"string\") {\r\n      group = this.get(groupResolvable) as Group|undefined;\r\n    } else if (typeof groupResolvable === \"number\") {\r\n      group = this._groups.get(groupResolvable) as Group|undefined;\r\n    } else {\r\n      group = groupResolvable;\r\n    }\r\n    return group;\r\n  }\r\n\r\n  /**\r\n   * Save the group data to storage.\r\n   */\r\n  save () {\r\n    let saveData : GroupSaveData[] = [];\r\n    for (const [, group] of this._groups) {\r\n      saveData.push(group.data);\r\n    }\r\n    this.management.extension.storage.set(SAVE_KEY, saveData);\r\n  }\r\n\r\n  /**\r\n   * Get the next group ID.\r\n   */\r\n  get nextID () {\r\n    let latestID = 0;\r\n    for (const [id] of this._groups) {\r\n      if (id > latestID) {\r\n        latestID = id;\r\n      }\r\n    }\r\n    return latestID + 1;\r\n  }\r\n}","import { PermissionManager } from \"./PermissionManager\";\r\nimport { Player } from \"@bhmb/bot\";\r\n\r\nexport type PermissionResolvable = string|Permission;\r\n\r\nexport interface PermissionIgnoring {\r\n  mod?: boolean,\r\n  admin?: boolean,\r\n  staff?: boolean,\r\n  owner?: boolean\r\n}\r\n\r\nexport interface PermissionData {\r\n  extension: string;\r\n  id: string;\r\n  name: string;\r\n  category: string;\r\n  command: string;\r\n  callback: (player: Player, args: string, id : string) => void,\r\n  ignore?: PermissionIgnoring\r\n};\r\n\r\ninterface InternalPermissionData {\r\n  id: string;\r\n  category: string;\r\n  name: string;\r\n  command: string;\r\n  callback: (player : Player, args : string, id : string) => void\r\n  ignore?: PermissionIgnoring;\r\n};\r\n\r\nexport class Permission {\r\n\r\n  extension: string;\r\n\r\n  id: string;\r\n\r\n  name: string;\r\n\r\n  category: string;\r\n  \r\n  callback : (player : Player, args : string, id : string) => void;\r\n\r\n  command: string;\r\n\r\n  manager: PermissionManager;\r\n\r\n  ignore?: PermissionIgnoring;\r\n\r\n  listener?: ({player, message} : {player : Player, message : string}) => void;\r\n\r\n  constructor (manager: PermissionManager, extension : string, data: InternalPermissionData) {\r\n    const {id, name, category, ignore, callback, command} = data;\r\n    this.extension = extension;\r\n    this.id = id;\r\n    this.name = name;\r\n    this.category = category;\r\n    this.ignore = ignore;\r\n    this.callback = callback;\r\n    this.command = command;\r\n    this.manager = manager;\r\n    this.listener = ({player, message} : {player : Player, message : string}) => this.handleMessage({player, message})\r\n    manager.management.extension.world.onMessage.sub(this.listener);\r\n\r\n  }\r\n\r\n  handleMessage ({player, message} : {player: Player, message: string}) {\r\n    const [command, ...argsRaw] = message.split(\" \");\r\n    const args = argsRaw.join(\" \");\r\n    const user = this.manager.management.users.get(player);\r\n    if (this.command.toLocaleUpperCase() === command.toLocaleUpperCase().slice(1)) {\r\n      if (user.permissions.has(this.id)) {\r\n        if (this.ignore) {\r\n          if (!(this.ignore.staff && player.isStaff) && !(this.ignore.admin && player.isAdmin) && !(this.ignore.mod && player.isMod) && !(this.ignore.owner && player.isOwner)) {\r\n            this.callback(player, args, this.id);\r\n          }\r\n        } else {\r\n          this.callback(player, args, this.id);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Delete this permission.\r\n   */\r\n  delete () : boolean {\r\n    return this.manager.delete(this);\r\n  }\r\n};","import { GroupManagement } from \"../GroupManagement\";\r\nimport { Permission, PermissionData, PermissionResolvable } from \"./Permission\";\r\nimport { Player } from \"@bhmb/bot\";\r\n\r\nexport class PermissionManager {\r\n\r\n  management: GroupManagement;\r\n\r\n  private _permissions: Map<string, Permission>;\r\n\r\n  constructor (management : GroupManagement) {\r\n    this.management = management;\r\n    this._permissions = new Map();\r\n  }\r\n\r\n  /**\r\n   * Add a permission, will return if the operation was successful.\r\n   */\r\n  add (permissionData : PermissionData) : boolean {\r\n    if (!this.get(permissionData.id)) {\r\n      this._permissions.set(permissionData.id, new Permission(this, permissionData.extension, {\r\n        id: permissionData.id,\r\n        name: permissionData.name,\r\n        category: permissionData.category,\r\n        ignore: permissionData.ignore,\r\n        command: permissionData.command,\r\n        callback: permissionData.callback\r\n      }));\r\n      this.management.ui.addPermission(this._permissions.get(permissionData.id) as Permission);\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Delete a permission, will return in the operation was successful.\r\n   */\r\n  delete (permissionResolvable : PermissionResolvable) : boolean {\r\n    const id = this.resolvePermissionID(permissionResolvable);\r\n    const permission = this._permissions.get(id) as Permission;\r\n    const deleted = this._permissions.delete(id);\r\n    if (deleted) {\r\n      this.management.extension.world.onMessage.unsub(permission.listener as ({player, message} : {player: Player, message: string}) => void);\r\n    }\r\n    return deleted;\r\n  }\r\n\r\n  /**\r\n   * Get all permissions that belong to an extension.\r\n   * @param extension Extension\r\n   */\r\n  getExtensionPermissions (extension : string) : Permission[] {\r\n    const extensionPermissions = [];\r\n    const e = extension.toLocaleLowerCase();\r\n    for (const [, permission] of this._permissions) {\r\n      if (permission.extension.toLocaleLowerCase() === e) {\r\n        extensionPermissions.push(permission);\r\n      }\r\n    }\r\n    return extensionPermissions;\r\n  }\r\n\r\n  /**\r\n   * Get a permission.\r\n   */\r\n  get (permissionResolvable : PermissionResolvable) : Permission|undefined {\r\n    const id = this.resolvePermissionID(permissionResolvable);\r\n    return this._permissions.get(id);\r\n  }\r\n\r\n  uninstall () {\r\n    for (const [, permission] of this._permissions) {\r\n      this.delete(permission);\r\n    }\r\n  }\r\n\r\n  private resolvePermissionID (permissionResolvable : PermissionResolvable) : string {\r\n    return typeof permissionResolvable === \"string\" ? permissionResolvable : permissionResolvable.id;\r\n  }\r\n};","import { Player } from \"@bhmb/bot\";\r\nimport { UserManager } from \"./UserManager\";\r\nimport { Permissions, PermissionsSaveData } from \"../Permissions/Permissions\";\r\nimport { Group } from \"../Groups/Group\";\r\n\r\nexport type PlayerResolvable = User|Player|string;\r\n\r\nexport interface UserData {\r\n  player: Player|string;\r\n  permissions?: PermissionsSaveData;\r\n}\r\n\r\nexport interface UserSaveData {\r\n  player: string;\r\n  permissions: PermissionsSaveData;\r\n}\r\n\r\nexport class User {\r\n\r\n  manager: UserManager;\r\n\r\n  player: Player;\r\n\r\n  permissions: Permissions;\r\n\r\n  groups: Set<Group>;\r\n\r\n  constructor (userData : UserData, manager : UserManager) {\r\n    this.manager = manager;\r\n    if (typeof userData.player === \"string\") {\r\n      this.player = this.manager.management.extension.world.getPlayer(userData.player);\r\n    } else {\r\n      this.player = userData.player;\r\n    }\r\n\r\n    this.groups = new Set(Array.from((this.manager.management.groups.get() as Map<number, Group>).values()).filter(group => Array.from(group.players).some(player => player.name === this.name)));\r\n    this.permissions = new Permissions(this, userData.permissions);\r\n  }\r\n\r\n  /**\r\n   * Delete this user's permissions.\r\n   */\r\n  delete () : boolean {\r\n    return this.manager.delete(this);\r\n  }\r\n\r\n  /**\r\n   * Save\r\n   */\r\n  save () {\r\n    return this.manager.save();\r\n  }\r\n\r\n  /**\r\n   * Get the name of the user.\r\n   */\r\n  get name () {\r\n    return this.player.name;\r\n  }\r\n\r\n  /**\r\n   * Get a JSON object that can be saved to storage\r\n   */\r\n  get data () : UserSaveData {\r\n    return {\r\n      player: this.name,\r\n      permissions: this.permissions.data\r\n    };\r\n  }\r\n};","import { GroupManagement } from \"../GroupManagement\";\r\nimport { PlayerResolvable, User, UserSaveData } from \"./User\";\r\n\r\nconst SAVE_KEY = \"users\";\r\n\r\nexport class UserManager {\r\n  management: GroupManagement;\r\n\r\n  private _users: Map<string, User>;\r\n\r\n  constructor (management : GroupManagement) {\r\n    this.management = management;\r\n    this._users = new Map(this.management.extension.storage.get(SAVE_KEY, []).map((data : UserSaveData) => [data.player, new User(data, this)] as [string, User]));\r\n  }\r\n\r\n  get (playerResolvable : PlayerResolvable) {\r\n    const player = this.resolvePlayer(playerResolvable);\r\n    let user = this._users.get(player.name);\r\n    if (!user) {\r\n      //Create user.\r\n      user = new User({\r\n        player\r\n      }, this);\r\n      this._users.set(player.name, user);\r\n    }\r\n    return user;\r\n  }\r\n\r\n  delete (playerResolvable : PlayerResolvable) : boolean {\r\n    const user = this.resolvePlayer(playerResolvable);\r\n    if (!user) return false;\r\n    const deleted = this._users.delete(user.name);\r\n    //TODO: Remove from UI.\r\n    this.save();\r\n    return deleted;\r\n  }\r\n\r\n  save () {\r\n    let saveData : UserSaveData[] = [];\r\n    for (const [, user] of this._users) {\r\n      saveData.push(user.data);\r\n    }\r\n    this.management.extension.storage.set(SAVE_KEY, saveData);\r\n  }\r\n\r\n  private resolvePlayer (playerResolvable : PlayerResolvable) {\r\n    return this.management.extension.world.getPlayer(typeof playerResolvable === \"string\" ? playerResolvable : playerResolvable.name);\r\n  }\r\n\r\n}","import { UIExtensionExports } from \"@bhmb/ui\";\r\nimport { GroupManagement } from \"../GroupManagement\";\r\nimport { Group } from \"../Groups/Group\";\r\nimport { MessageBot } from \"@bhmb/bot\";\r\nimport { Permission } from \"../Permissions/Permission\";\r\nimport groupTabHTML from \"./Groups/Tab.html\";\r\nimport permissionHTML from \"./Groups/Permission.html\";\r\n\r\nclass UI {\r\n\r\n  private _ui : UIExtensionExports;\r\n\r\n  management : GroupManagement;\r\n\r\n  namespace : string;\r\n\r\n  constructor (management : GroupManagement) {\r\n    this._ui = management.extension.bot.getExports(\"ui\") as UIExtensionExports;\r\n    this.management = management;\r\n    this.namespace = \"dapersonmgn/groupManagement/tab\";\r\n    if (this._ui) {\r\n      this._ui.addTabGroup(\"Group Management\", this.namespace);\r\n    }\r\n  }\r\n\r\n  uninstall () {\r\n    if (this._ui) {\r\n      this._ui.removeTabGroup(this.namespace);\r\n    }\r\n  }\r\n\r\n  addPermission (permission : Permission) {\r\n    const [parentCategory, subCategory] = permission.category.split(\"/\");\r\n    const groups = this.management.groups.get() as Map<number, Group>;\r\n    for (const [, group] of groups) {\r\n      const tab = group.tab as HTMLDivElement;\r\n      if (!tab.querySelector(`p[data-category=\"${parentCategory}\"]`)) {\r\n        //Parent category does not exist, we need to create it.\r\n        (tab.querySelector(\".menu\") as HTMLElement).innerHTML += `<p class=\"menu-label is-unselectable\" data-category=\"${parentCategory}\">${parentCategory}</p><ul class=\"menu-list\" data-category=\"${parentCategory}\"></ul>`;\r\n      }\r\n      if (!tab.querySelector(`ul[data-category=\"${parentCategory}\"] > li > a[data-subcategory=\"${subCategory}\"]`)) {\r\n          //Subcategory doesn't exist, create it.\r\n          const listEl = tab.querySelector(`ul[data-category=\"${parentCategory}\"]`) as HTMLUListElement;\r\n          listEl.innerHTML += `<li><a href=\"#\" class=\"is-unselectable\" data-subcategory=\"${subCategory}\">${subCategory}</a></li>`;\r\n          (listEl.querySelector(`a[data-subcategory=\"${subCategory}\"]`) as HTMLLinkElement).addEventListener(\"click\",  event => this.subcategoryListener(event, group));\r\n          (tab.querySelectorAll(\".box\")[1] as HTMLDivElement).innerHTML += `<div data-subcategory=\"${subCategory}\" data-category=\"${parentCategory}\" class=\"is-invisible\" style=\"display: none;\"><div class=\"columns\" style=\"padding-top: 2.5%;\"><div class=\"column\"></div><div class=\"column\"></div><div class=\"column\"></div></div></div>`;\r\n      }\r\n      //Add the permission to it's tab.\r\n      \r\n      const columns = Array.from(tab.querySelectorAll(`div[data-subcategory=\"${subCategory}\"][data-category=\"${parentCategory}\"] .column`)) as HTMLDivElement[];\r\n      const col = columns.sort((colA, colB) => colA.querySelectorAll(\"input[data-permission]\").length - colB.querySelectorAll(\"input[data-permission]\").length)[0];\r\n      col.innerHTML += permissionHTML\r\n        .replace(\"{ID}\", permission.id)\r\n        .replace(\"{PERMISSION}\", permission.name)\r\n        .replace(\"{ALLOWED}\", group.permissions.has(permission) ? \"checked \" : \"\")\r\n        .replace(\"{DISABLED}\", group.permissions.disabled.has(permission.id) ? \"disabled\" : \"\");\r\n\r\n      (tab.querySelector(`a[data-subcategory=\"${subCategory}\"]`) as HTMLLinkElement).click();\r\n    }\r\n  }\r\n\r\n  addGroup (group : Group) : HTMLDivElement | undefined {\r\n    let tab : HTMLDivElement | undefined;\r\n    if (this._ui) {\r\n      tab = this._ui.addTab(group.name, this.namespace);\r\n      tab.innerHTML = groupTabHTML;\r\n      (tab.querySelector(\".title\") as HTMLSpanElement).innerText = group.name;\r\n      if (group.managed) {\r\n        tab.querySelectorAll(\".subtitle\")[0].innerHTML = \"\";\r\n      }\r\n\r\n      const permissions = MessageBot.extensions.map(extension => group.manager.management.permissions.getExtensionPermissions(extension)).reduce((pSetA, pSetB) => pSetA.concat(pSetB));\r\n\r\n      const categories : {\r\n        [category : string] : {\r\n          [subcategory : string] : Permission[]\r\n        }\r\n      } = {};\r\n      for (const permission of permissions) {\r\n        const [parentCategory, subCategory] = permission.category.split(\"/\");\r\n        if (!categories[parentCategory]) {\r\n          categories[parentCategory] = {};\r\n        }\r\n        if (!categories[parentCategory][subCategory]) {\r\n          categories[parentCategory][subCategory] = [];\r\n        }\r\n        categories[parentCategory][subCategory].push(permission);\r\n      }\r\n\r\n      let categoryHTML = \"\";\r\n      let firstSubCategorySelected = false;\r\n      let isSelected = false;\r\n      for (const parentCategory in categories) {\r\n        categoryHTML += `<p class=\"menu-label is-unselectable\" data-category=\"${parentCategory}\">${parentCategory}</p><ul class=\"menu-list\" data-category=\"${parentCategory}\">`;\r\n        for (const subCategory in categories[parentCategory]) {\r\n          if (firstSubCategorySelected) {\r\n            //Normal.\r\n            isSelected = false;\r\n            categoryHTML += `<li><a href=\"#\" class=\"is-unselectable\" data-subcategory=\"${subCategory}\">${subCategory}</a></li>`;\r\n          } else {\r\n            //Selected.\r\n            isSelected = true;\r\n            firstSubCategorySelected = true;\r\n            categoryHTML += `<li><a href=\"#\" class=\"is-unselectable\" style=\"background: #182b73; color: #ffffff;\" data-subcategory=\"${subCategory}\" data-selected>${subCategory}</a></li>`; \r\n          }\r\n          const columns : string[][] = [[], [], []];\r\n          let colNum = 0;\r\n          for (const permission of permissions) {\r\n            if (permission.category === `${parentCategory}/${subCategory}`) {\r\n              if (columns.length === colNum) {\r\n                colNum = 0;\r\n              }\r\n              columns[colNum].push(\r\n                permissionHTML\r\n                  .replace(\"{ID}\", permission.id)\r\n                  .replace(\"{PERMISSION}\", permission.name)\r\n                  .replace(\"{ALLOWED}\", group.permissions.has(permission) ? \"checked \" : \"\")\r\n                  .replace(\"{DISABLED}\", group.permissions.disabled.has(permission.id) ? \"disabled\" : \"\")\r\n              );\r\n              colNum++;\r\n            }\r\n          }\r\n          let subCategoryTab = `<div data-subcategory=\"${subCategory}\" data-category=\"${parentCategory}\" ${isSelected ? \"\" : 'class=\"is-invisible\" style=\"display: none;\"'}><div class=\"columns\" style=\"padding-top: 2.5%;\"><div class=\"column\">${columns[0].join(\"\")}</div><div class=\"column\">${columns[1].join(\"\")}</div><div class=\"column\">${columns[2].join(\"\")}</div></div></div>`;\r\n          (tab.querySelectorAll(\".box\")[1] as HTMLElement).innerHTML += subCategoryTab;\r\n        }\r\n        categoryHTML += `</ul>`;\r\n      }\r\n      (tab.querySelector(\".menu\") as HTMLElement).innerHTML = categoryHTML;\r\n      tab.addEventListener(\"change\", event => this.changePermissionListener(event, group));\r\n      tab.addEventListener(\"click\", event => this.clickListener(event, group));\r\n\r\n    }\r\n\r\n    // TODO: Select this tab.\r\n    return tab;\r\n  }\r\n\r\n  deleteGroup (group : Group) {\r\n    if (group.tab) {\r\n      this._ui.removeTab(group.tab);\r\n    }\r\n  }\r\n\r\n  refreshGroup (group : Group) {\r\n    if (group.tab) {\r\n      this.deleteGroup(group);\r\n      group.tab = this.addGroup(group);\r\n    }\r\n  }\r\n\r\n  changePermissionListener (event : Event, group : Group) {\r\n    const target = event.target as HTMLInputElement;\r\n    const permission = target.getAttribute(\"data-permission\") as string;\r\n    if (target.checked) {\r\n      group.permissions.add(permission);\r\n    } else {\r\n      group.permissions.delete(permission);\r\n    }\r\n  }\r\n\r\n  deleteGroupUI (group : Group) {\r\n    this._ui.alert(\"Are you sure?\", [\r\n      {\r\n        text: \"Yes\",\r\n        style: \"is-danger\"\r\n      },\r\n      {\r\n        text: \"Cancel\"\r\n      }\r\n    ], response => {\r\n      if (response === \"Yes\") {\r\n        const result = group.delete();\r\n        if (!result) {\r\n          this._ui.notify(\"Failed to delete group.\");\r\n        } else {\r\n          this._ui.toggleMenu();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  renameGroupUI (group : Group) {\r\n    this._ui.prompt(\"What would you like to rename this group to?\", newName => {\r\n      if (newName) {\r\n        const result = group.rename(newName);\r\n        if (!result) {\r\n          this._ui.notify(\"Failed to rename group.\");\r\n        } else {\r\n          this._ui.toggleMenu();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  addGroupUI () {\r\n    this._ui.prompt(\"What would you like to name this new group?\", name => {\r\n      if (name) {\r\n        const result = this.management.groups.add({\r\n          name\r\n        });\r\n        if (result) {\r\n          this._ui.toggleMenu();\r\n        } else {\r\n          this._ui.notify(\"This group name already exists!\");\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  clickListener (event : MouseEvent, group : Group) {\r\n    const element = event.target as HTMLLinkElement;\r\n    if (element.tagName === \"A\") {\r\n      const action = element.getAttribute(\"data-action\");\r\n      if (action) {\r\n        switch (action) {\r\n          case \"rename\" :\r\n            this.renameGroupUI(group);\r\n          break;\r\n          case \"create\":\r\n            this.addGroupUI();\r\n          break;\r\n          case \"delete\":\r\n            this.deleteGroupUI(group);\r\n          break;\r\n        }\r\n      } else {\r\n        const subcategory = element.getAttribute(\"data-subcategory\");\r\n        if(subcategory) {\r\n          this.subcategoryListener(event, group);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  subcategoryListener (event : MouseEvent, group : Group) {\r\n    const tab = group.tab as HTMLDivElement;\r\n    const wantedSubCategory = (event.target as HTMLElement).getAttribute(\"data-subcategory\");\r\n    const parentCategory = (((event.target as HTMLElement).parentElement as HTMLElement).parentElement as HTMLElement).getAttribute(\"data-category\");\r\n    const tabToShow = tab.querySelector(`div[data-subcategory=\"${wantedSubCategory}\"][data-category=\"${parentCategory}\"]`) as HTMLDivElement;\r\n    if (tabToShow.classList.contains(\"is-invisible\")) {\r\n      const oldSelectedCategory = ((((event.target as HTMLElement).parentElement as HTMLElement).parentElement as HTMLElement).parentElement as HTMLElement).querySelector(\"a[data-selected]\") as HTMLElement;\r\n      if (oldSelectedCategory) {\r\n        oldSelectedCategory.setAttribute(\"style\", \"\");\r\n        oldSelectedCategory.removeAttribute(\"data-selected\");\r\n        const tabToHide = tab.querySelector(`div[data-subcategory=\"${oldSelectedCategory.getAttribute(\"data-subcategory\")}\"][data-category=\"${((oldSelectedCategory.parentElement as HTMLElement).parentElement as HTMLElement).getAttribute(\"data-category\")}\"]`) as HTMLDivElement;\r\n        tabToHide.classList.add(\"is-invisible\");\r\n        tabToHide.setAttribute(\"style\", \"display: none\");\r\n      }\r\n      (event.target as HTMLElement).setAttribute(\"style\", \"background: #182b73; color: #ffffff;\");\r\n      (event.target as HTMLElement).setAttribute(\"data-selected\", \"\");\r\n      tabToShow.classList.remove(\"is-invisible\");\r\n      tabToShow.setAttribute(\"style\", \"\");\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport {\r\n  UI\r\n};","import { MessageBotExtension } from \"@bhmb/bot\";\r\nimport { GroupManager } from \"./Groups/GroupManager\";\r\nimport { PermissionManager } from \"./Permissions/PermissionManager\";\r\nimport { UserManager } from \"./Users/UserManager\";\r\nimport { UI } from \"./UI\";\r\n\r\nexport class GroupManagement {\r\n\r\n  groups: GroupManager;\r\n\r\n  users: UserManager;\r\n\r\n  permissions: PermissionManager;\r\n\r\n  extension: MessageBotExtension;\r\n\r\n  ui: UI;\r\n\r\n  constructor (ex : MessageBotExtension) {\r\n    this.extension = ex;\r\n    this.ui = new UI(this);\r\n    this.permissions = new PermissionManager(this);\r\n    this.groups = new GroupManager(this);\r\n    this.users = new UserManager(this);\r\n  }\r\n\r\n  /**\r\n   * Called when the extension is to be uninstalled.\r\n   */\r\n  uninstall () {\r\n    this.permissions.uninstall();\r\n    this.ui.uninstall();\r\n  }\r\n\r\n  /**\r\n   * Save the groups and users.\r\n   */\r\n  save () {\r\n    this.groups.save();\r\n    this.users.save();\r\n  }\r\n\r\n\r\n}","import { Player } from \"@bhmb/bot\";\r\n\r\nexport default (player : Player, args : string, id : string) => {\r\n  player;\r\n  args;\r\n  id;\r\n};","import callback from \"./BlockheadsHandler\";\r\nimport { ExtensionPermission } from \"..\";\r\n\r\ninterface BlockheadExtensionPermission extends ExtensionPermission {\r\n  display: {\r\n    category: \"Blockheads/Moderator Commands\"|\"Blockheads/Administrator Commands\"|\"Blockheads/List Commands\"|\"Blockheads/World Commands\",\r\n    name: string\r\n  }\r\n}\r\n\r\nexport const BlockheadPermissions : BlockheadExtensionPermission[] =  [\r\n  {\r\n    callback,\r\n    id: \"BH.HELP\",\r\n    command: \"HELP\",\r\n    ignore: {\r\n      staff: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/Moderator Commands\",\r\n      name: \"View the /help message\"\r\n    },\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.PLAYERS\",\r\n    command: \"PLAYERS\",\r\n    ignore: {\r\n      staff: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/Moderator Commands\",\r\n      name: \"View the /players message\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.KICK\",\r\n    command: \"KICK\",\r\n    ignore: {\r\n      staff: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/Moderator Commands\",\r\n      name: \"Kick any normal player\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.KICK_MOD\",\r\n    command: \"KICK\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/Administrator Commands\",\r\n      name: \"Kick any moderator\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.KICK_ADMIN\",\r\n    command: \"KICK\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/Administrator Commands\",\r\n      name: \"Kick any administrator\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.BAN\",\r\n    command: \"BAN\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/Moderator Commands\",\r\n      name: \"Ban any normal player\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.BAN_MOD\",\r\n    command: \"BAN\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/Administrator Commands\",\r\n      name: \"Ban any moderator\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.BAN_ADMIN\",\r\n    command: \"BAN\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/Administrator Commands\",\r\n      name: \"Ban any administrator\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.BAN_NO_DEVICE\",\r\n    command: \"BAN-NO-DEVICE\",\r\n    ignore: {\r\n      staff: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/Moderator Commands\",\r\n      name: \"Ban any normal player using /ban-no-device\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.BAN_NO_DEVICE_MOD\",\r\n    command: \"BAN-NO-DEVICE\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/Administrator Commands\",\r\n      name: \"Ban any moderator using /ban-no-device\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.BAN_NO_DEVICE_ADMIN\",\r\n    command: \"BAN-NO-DEVICE\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/Administrator Commands\",\r\n      name: \"Ban any administrator using /ban-no-device\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.UNBAN\",\r\n    command: \"UNBAN\",\r\n    ignore: {\r\n      staff: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/Moderator Commands\",\r\n      name: \"Unban any player\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.WHITELIST\",\r\n    command: \"WHITELIST\",\r\n    ignore: {\r\n      staff: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/List Commands\",\r\n      name: \"Whitelist any player\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.UNWHITELIST\",\r\n    command: \"UNWHITELIST\",\r\n    ignore: {\r\n      staff: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/List Commands\",\r\n      name: \"Unwhitelist any player\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.LIST_BLACKLIST\",\r\n    command: \"LIST-BLACKLIST\",\r\n    ignore: {\r\n      staff: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/List Commands\",\r\n      name: \"List the blacklist\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.LIST_WHITELIST\",\r\n    command: \"LIST-WHITELIST\",\r\n    ignore: {\r\n      staff: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/List Commands\",\r\n      name: \"List the whitelist\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.LIST_ADMINLIST\",\r\n    command: \"LIST-ADMINLIST\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/List Commands\",\r\n      name: \"List the adminlist\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.LIST_MODLIST\",\r\n    command: \"LIST-MODLIST\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/List Commands\",\r\n      name: \"List the modlist\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.STOP\",\r\n    command: \"STOP\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/Administrator Commands\",\r\n      name: \"Stop the server\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.PVPON\",\r\n    command: \"PVP-ON\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/Administrator Commands\",\r\n      name: \"Turn PVP on\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.PVPOFF\",\r\n    command: \"PVP-OFF\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/Administrator Commands\",\r\n      name: \"Turn PVP off\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.LOADLISTS\",\r\n    command: \"LOAD-LISTS\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/List Commands\",\r\n      name: \"Reload the lists\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.MOD\",\r\n    command: \"MOD\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/Administrator Commands\",\r\n      name: \"Add others to the modlist\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.UNMOD\",\r\n    command: \"UNMOD\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/Administrator Commands\",\r\n      name: \"Remove others from the modlist\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.ADMIN\",\r\n    command: \"ADMIN\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/Administrator Commands\",\r\n      name: \"Add others to the adminlist\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.UNADMIN\",\r\n    command: \"UNADMIN\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/Administrator Commands\",\r\n      name: \"Remove others from the adminlist\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.CLEARBLACKLIST\",\r\n    command: \"CLEAR-BLACKLIST\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/List Commands\",\r\n      name: \"Clear the blacklist\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.CLEARWHITELIST\",\r\n    command: \"CLEAR-WHITELIST\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/List Commands\",\r\n      name: \"Clear the whitelist\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.CLEARMODLIST\",\r\n    command: \"CLEAR-MODLIST\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/List Commands\",\r\n      name: \"Clear the modlist\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.CLEARADMINLIST\",\r\n    command: \"CLEAR-ADMINLIST\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/List Commands\",\r\n      name: \"Clear the adminlist\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.SETPASSWORD\",\r\n    command: \"SET-PASSWORD\",\r\n    ignore: {\r\n      owner: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/World Commands\",\r\n      name: \"Set the world's password.\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.SETPRIVACY\",\r\n    command: \"SET-PRIVACY\",\r\n    ignore: {\r\n      owner: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/World Commands\",\r\n      name: \"Set the privacy of the world\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.REMOVEPASSWORD\",\r\n    command: \"REMOVE-PASSWORD\",\r\n    ignore: {\r\n      owner: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/World Commands\",\r\n      name: \"Remove the world's password\"\r\n    }\r\n  }\r\n];","import { Player } from \"@bhmb/bot\";\r\n\r\nexport default (player : Player, args : string, id : string) => {\r\n  player;\r\n  args;\r\n  id;\r\n};","import callback from \"./GroupManagementHandler\";\r\nimport { ExtensionPermission } from \"..\";\r\n\r\ninterface GroupManagementExtensionPermission extends ExtensionPermission {\r\n  display: {\r\n    category: \"Group Management/General Commands\"|\"Group Management/Group Commands\"|\"Group Management/Permission Commands\",\r\n    name: string\r\n  }\r\n}\r\n\r\nexport const GroupManagementPermissions : GroupManagementExtensionPermission[] = [\r\n  {\r\n    callback,\r\n    id: \"GM.HELP\",\r\n    command: \"GM-HELP\",\r\n    display: {\r\n      category: \"Group Management/General Commands\",\r\n      name: \"View the /GM-help message\"\r\n    },\r\n  }\r\n];","import { MessageBot, Player } from \"@bhmb/bot\";\nimport { GroupManagement } from \"./GroupManagement\";\nimport { BlockheadPermissions } from \"./Extensions/Blockheads\";\nimport { GroupManagementPermissions } from \"./Extensions/GroupManagement\";\n\nexport interface ExtensionPermission {\n  callback: (player: Player, args: string, id: string) => void;\n  id: string;\n  command: string;\n  display: {\n    category: string;\n    name: string;\n  };\n  ignore?: {\n    admin?: boolean,\n    mod?: boolean,\n    staff?: boolean,\n    owner?: boolean\n  }\n};\n\nconst EXTENSION_ID = \"dapersonmgn/groupManagementBeta\";\n\nMessageBot.registerExtension(EXTENSION_ID, ex => {\n\n  const GM = new GroupManagement(ex);\n  \n  for (const permission of BlockheadPermissions) {\n    const {id, command, callback, ignore} = permission;\n    GM.permissions.add({\n      id,\n      command,\n      callback,\n      ignore,\n      extension: EXTENSION_ID,\n      category: permission.display.category,\n      name: permission.display.name\n    });\n  }\n\n  for (const permission of GroupManagementPermissions) {\n    const {id, command, callback, ignore} = permission;\n    GM.permissions.add({\n      id,\n      command,\n      callback,\n      ignore,\n      extension: EXTENSION_ID,\n      category: permission.display.category,\n      name: permission.display.name\n    });\n  }\n\n  if (!GM.groups.get(\"Administrator\")) {\n    GM.groups.add({\n      name: \"Administrator\",\n      permissions: {\n        allowed: [\"BH.HELP\", \"BH.PLAYERS\", \"BH.KICK_MOD\", \"BH.KICK_ADMIN\", \"BH.KICK\", \"BH.BAN_MOD\", \"BH.BAN_ADMIN\", \"BH.BAN\", \"BH.BAN_NO_DEVICE_MOD\", \"BH.BAN_NO_DEVICE_ADMIN\", \"BH.BAN_NO_DEVICE\", \"BH.UNBAN\", \"BH.WHITELIST\", \"BH.UNWHITELIST\", \"BH.LIST_MODLIST\", \"BH.LIST_BLACKLIST\", \"BH.LIST_WHITELIST\", \"BH.LIST_ADMINLIST\", \"BH.LOADLISTS\", \"BH.STOP\", \"BH.PVPON\", \"BH.PVPOFF\", \"BH.MOD\", \"BH.UNMOD\", \"BH.ADMIN\", \"BH.UNADMIN\", \"BH.CLEARMODLIST\", \"BH.CLEARADMINLIST\", \"BH.CLEARWHITELIST\", \"BH.CLEARBLACKLIST\"],\n        disabled: [\"BH.HELP\", \"BH.PLAYERS\", \"BH.KICK_MOD\", \"BH.KICK_ADMIN\", \"BH.KICK\", \"BH.BAN_MOD\", \"BH.BAN_ADMIN\", \"BH.BAN\", \"BH.BAN_NO_DEVICE_MOD\", \"BH.BAN_NO_DEVICE_ADMIN\", \"BH.BAN_NO_DEVICE\", \"BH.UNBAN\", \"BH.WHITELIST\", \"BH.UNWHITELIST\", \"BH.LIST_MODLIST\", \"BH.LIST_BLACKLIST\", \"BH.LIST_WHITELIST\", \"BH.LIST_ADMINLIST\", \"BH.LOADLISTS\", \"BH.STOP\", \"BH.PVPON\", \"BH.PVPOFF\", \"BH.MOD\", \"BH.UNMOD\", \"BH.ADMIN\", \"BH.UNADMIN\", \"BH.CLEARMODLIST\", \"BH.CLEARADMINLIST\", \"BH.CLEARWHITELIST\", \"BH.CLEARBLACKLIST\"]\n      },\n      managed: true\n    });\n  }\n  if (!GM.groups.get(\"Moderator\")) {\n    GM.groups.add({\n      name: \"Moderator\",\n      permissions: {\n        allowed: [\"BH.HELP\", \"BH.PLAYERS\", \"BH.KICK\", \"BH.BAN\", \"BH.BAN_NO_DEVICE\", \"BH.UNBAN\", \"BH.WHITELIST\", \"BH.UNWHITELIST\", \"BH.LIST_BLACKLIST\", \"BH.LIST_WHITELIST\"],\n        disabled: [\"BH.HELP\", \"BH.PLAYERS\", \"BH.KICK\", \"BH.BAN\", \"BH.BAN_NO_DEVICE\", \"BH.UNBAN\", \"BH.WHITELIST\", \"BH.UNWHITELIST\", \"BH.LIST_BLACKLIST\", \"BH.LIST_WHITELIST\"]\n      },\n      managed: true\n    });\n  }\n  if (!GM.groups.get(\"Anyone\")) {\n    GM.groups.add({\n      name: \"Anyone\",\n      permissions: {\n        allowed: [],\n        disabled: []\n      },\n      managed: true\n    });\n  }\n\n  ex.exports.manager = GM;\n\n  /**\n   * Listener for when an extension is registered.\n   * @param extension Name of the extension.\n   */\n  const handleExtensionRegister = (extension : string) => {\n    const extensionExports = ex.bot.getExports(extension);\n    if (extensionExports && extensionExports.groupManagement) {\n\n      const permissions : ExtensionPermission[] = extensionExports.groupManagement;\n      for (const permissionData of permissions) {\n        GM.permissions.add({\n          extension,\n          category: permissionData.display.category,\n          name: permissionData.display.name,\n          id: permissionData.id,\n          command: permissionData.command,\n          callback: permissionData.callback,\n          ignore: permissionData.ignore\n        });\n      }\n\n    }\n  };\n\n  /**\n   * Listener for when an extension is deregistered.\n   * @param extension Name of the extension.\n   */\n  const handleExtensionDeregister = (extension : string) => {\n    const permissions = GM.permissions.getExtensionPermissions(extension);\n    for (const permission of permissions) {\n      permission.delete();\n    }\n  };\n\n  /**\n   * Loads all extensions that were loaded before this extension.\n   */\n  const handleExistingExtensions = () => {\n    const extensions = MessageBot.extensions;\n    for (const extension of extensions) {\n      handleExtensionRegister(extension);\n    }\n  };\n\n  ex.remove = () => {\n    MessageBot.extensionRegistered.unsub(handleExtensionRegister);\n    MessageBot.extensionDeregistered.unsub(handleExtensionDeregister);\n    GM.ui.uninstall();\n  };\n\n  ex.uninstall = () => {\n    GM.uninstall();\n    MessageBot.extensionRegistered.unsub(handleExtensionRegister);\n    MessageBot.extensionDeregistered.unsub(handleExtensionDeregister);\n  };\n\n  MessageBot.extensionRegistered.sub(handleExtensionRegister);\n  MessageBot.extensionDeregistered.sub(handleExtensionDeregister);\n  handleExistingExtensions();\n});"],"names":["SAVE_KEY","MessageBot","callback"],"mappings":";;;;;;QASa,WAAW;MAQtB,YAAa,MAAmB,EAAE,WAAkC;UAClE,MAAM,IAAI,GAAG,WAAW,IAAI;cAC1B,OAAO,EAAE,EAAE;cACX,QAAQ,EAAE,EAAE;WACb,CAAC;UAEF,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;UACrB,IAAI,CAAC,OAAO,GAAG,IAAI,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;UACrC,IAAI,CAAC,QAAQ,GAAG,IAAI,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;OACxC;MAED,GAAG,CAAE,oBAA2C;UAC9C,MAAM,UAAU,GAAG,IAAI,CAAC,iBAAiB,CAAC,oBAAoB,CAAC,CAAC;UAChE,IAAI,CAAC,UAAU;cAAE,OAAO,KAAK,CAAC;UAC9B,OAAO,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;OACxC;MAED,GAAG,CAAE,oBAA2C,EAAE,OAAiB,KAAK,EAAE,WAAqB,KAAK;UAClG,MAAM,UAAU,GAAG,IAAI,CAAC,iBAAiB,CAAC,oBAAoB,CAAC,CAAC;UAChE,IAAI,CAAC,UAAU,KAAK,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC,KAAK,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC;cAAE,OAAO,KAAK,CAAC;UACpK,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;UAChC,IAAI,QAAQ,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE,CAAC,EAAE;cACjD,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;WAClC;UACD,IAAI,CAAC,IAAI,EAAE,CAAC;UACZ,OAAO,IAAI,CAAC;OACb;MAED,MAAM,CAAE,oBAA2C,EAAE,OAAiB,KAAK,EAAE,WAAqB,KAAK;UACrG,MAAM,UAAU,GAAG,IAAI,CAAC,iBAAiB,CAAC,oBAAoB,CAAC,CAAC;UAChE,IAAI,CAAC,UAAU,KAAK,CAAC,IAAI,IAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;cAAE,OAAO,KAAK,CAAC;UAC7E,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;UACnD,MAAM,eAAe,GAAG,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,UAAU,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC;UAC/E,IAAI,CAAC,IAAI,EAAE,CAAC;UACZ,OAAO,OAAO,IAAI,eAAe,CAAC;OACnC;MAED,IAAI;UACF,OAAO,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;OAC3B;MAEO,iBAAiB,CAAE,oBAA2C;UACpE,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC,WAAW,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC;OAC7E;MAED,IAAI,IAAI;UACN,OAAO;cACL,OAAO,EAAE,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC;cACjC,QAAQ,EAAE,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC;WACpC,CAAC;OACH;GACF;;QC1CY,KAAK;MAgBhB,YAAa,SAAgC,EAAE,OAAsB;UACnE,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC,IAAI,CAAC;UAC3B,IAAI,CAAC,EAAE,GAAG,SAAS,CAAC,EAAE,CAAC;UACvB,IAAI,CAAC,WAAW,GAAG,IAAI,WAAW,CAAC,IAAI,EAAE,SAAS,CAAC,WAAW,CAAC,CAAC;UAChE,IAAI,CAAC,OAAO,GAAG,IAAI,GAAG,CAAC,CAAC,SAAS,CAAC,OAAO,IAAI,EAAE,EAAE,GAAG,CAAC,YAAY,IAAI,OAAO,YAAY,KAAK,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,SAAS,CAAC,KAAK,CAAC,SAAS,CAAC,YAAY,CAAC,GAAG,YAAY,CAAC,CAAC,CAAC;UACzL,IAAI,CAAC,OAAO,GAAG,SAAS,CAAC,OAAO,IAAI,KAAK,CAAC;UAC1C,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;UACvB,IAAI,CAAC,GAAG,GAAG,OAAO,CAAC,UAAU,CAAC,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;UAEhD,IAAI,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,KAAK,EAAE;cACjC,KAAK,MAAM,MAAM,IAAI,IAAI,CAAC,OAAO,EAAE;kBACjC,MAAM,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;kBACvD,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;eACvB;WACF;OAEF;;;;;MAMD,MAAM,CAAE,OAAgB;UACtB,OAAO,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;OAC3C;;;;;MAMD,SAAS,CAAE,gBAAqC;UAC9C,MAAM,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,SAAS,CAAC,KAAK,CAAC,SAAS,CAAC,OAAO,gBAAgB,KAAK,QAAQ,GAAG,gBAAgB,GAAG,gBAAgB,CAAC,IAAI,CAAC,CAAC;UAC7I,IAAI,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE;cACvB,OAAO,KAAK,CAAC;WACd;eAAM;cACL,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;cACpB,OAAO,IAAI,CAAC;WACb;OACF;;;;;MAMD,YAAY,CAAE,gBAAqC;UACjD,MAAM,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,SAAS,CAAC,KAAK,CAAC,SAAS,CAAC,OAAO,gBAAgB,KAAK,QAAQ,GAAG,gBAAgB,GAAG,gBAAgB,CAAC,IAAI,CAAC,CAAC;UAC7I,OAAO,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;OAC/B;;;;MAKD,MAAM;UACJ,OAAO,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;OAClC;MAED,IAAI;UACF,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;OAC5B;;;;MAKD,IAAI,IAAI;UACN,OAAO;cACL,EAAE,EAAE,IAAI,CAAC,EAAE;cACX,IAAI,EAAE,IAAI,CAAC,IAAI;cACf,WAAW,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI;cAClC,OAAO,EAAE,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,MAAM,IAAI,MAAM,CAAC,IAAI,CAAC;cAC5D,OAAO,EAAE,IAAI,CAAC,OAAO;WACtB,CAAC;OACH;GACF;;EC/GD,MAAM,QAAQ,GAAG,QAAQ,CAAC;AAE1B,QAAa,YAAY;MAMvB,YAAa,UAA4B;UACvC,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;UAE7B,IAAI,CAAC,OAAO,GAAG,IAAI,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,SAAyB,KAAK,CAAC,SAAS,CAAC,EAAE,EAAE,IAAI,KAAK,CAAC,SAAS,EAAE,IAAI,CAAC,CAAoB,CAAC,CAAC,CAAC;OAC/K;;;;;MAMD,GAAG,CAAE,SAAqB;UACxB,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE;cAC7B,MAAM,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC;cACvB,MAAM,KAAK,GAAG,IAAI,KAAK,iBAAE,EAAE,IAAK,SAAS,GAAG,IAAI,CAAC,CAAC;cAClD,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;cAC5B,IAAI,CAAC,IAAI,EAAE,CAAC;cACZ,OAAO,KAAK,CAAC;WACd;OACF;;;;;MAMD,MAAM,CAAE,eAAiC;UACvC,MAAM,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC,CAAC;UACjD,IAAI,CAAC,KAAK,IAAI,KAAK,CAAC,OAAO;cAAE,OAAO,KAAK,CAAC;UAC1C,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;UAC9B,IAAI,CAAC,IAAI,EAAE,CAAC;UACZ,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;UACtC,OAAO,IAAI,CAAC;OACb;;;;;MAMD,GAAG,CAAE,aAA8B;UACjC,IAAI,aAAa,EAAE;cACjB,IAAI,OAAO,aAAa,KAAK,QAAQ,EAAE;kBACrC,KAAK,MAAM,GAAG,KAAK,CAAC,IAAI,IAAI,CAAC,OAAO,EAAE;sBACpC,IAAI,KAAK,CAAC,IAAI,KAAK,aAAa,EAAE;0BAChC,OAAO,KAAK,CAAC;uBACd;mBACF;eACF;mBAAM;kBACL,OAAO,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;eACxC;WACF;eAAM;cACL,OAAO,IAAI,CAAC,OAAO,CAAC;WACrB;OACF;;;;;;MAOD,MAAM,CAAE,eAAiC,EAAE,OAAgB;UACzD,MAAM,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC,CAAC;UACjD,IAAI,KAAK,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE;cACjD,KAAK,CAAC,IAAI,GAAG,OAAO,CAAC;cACrB,IAAI,CAAC,IAAI,EAAE,CAAC;cACZ,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;cACvC,OAAO,IAAI,CAAC;WACb;UACD,OAAO,KAAK,CAAC;OACd;;;;;MAMO,YAAY,CAAE,eAAiC;UACrD,IAAI,KAAK,CAAC;UAEV,IAAI,OAAO,eAAe,KAAK,QAAQ,EAAE;cACvC,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,eAAe,CAAoB,CAAC;WACtD;eAAM,IAAI,OAAO,eAAe,KAAK,QAAQ,EAAE;cAC9C,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,eAAe,CAAoB,CAAC;WAC9D;eAAM;cACL,KAAK,GAAG,eAAe,CAAC;WACzB;UACD,OAAO,KAAK,CAAC;OACd;;;;MAKD,IAAI;UACF,IAAI,QAAQ,GAAqB,EAAE,CAAC;UACpC,KAAK,MAAM,GAAG,KAAK,CAAC,IAAI,IAAI,CAAC,OAAO,EAAE;cACpC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;WAC3B;UACD,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;OAC3D;;;;MAKD,IAAI,MAAM;UACR,IAAI,QAAQ,GAAG,CAAC,CAAC;UACjB,KAAK,MAAM,CAAC,EAAE,CAAC,IAAI,IAAI,CAAC,OAAO,EAAE;cAC/B,IAAI,EAAE,GAAG,QAAQ,EAAE;kBACjB,QAAQ,GAAG,EAAE,CAAC;eACf;WACF;UACD,OAAO,QAAQ,GAAG,CAAC,CAAC;OACrB;GACF;;QCzFY,UAAU;MAoBrB,YAAa,OAA0B,EAAE,SAAkB,EAAE,IAA4B;UACvF,MAAM,EAAC,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,MAAM,EAAE,QAAQ,EAAE,OAAO,EAAC,GAAG,IAAI,CAAC;UAC7D,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;UAC3B,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;UACb,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;UACjB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;UACzB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;UACrB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;UACzB,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;UACvB,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;UACvB,IAAI,CAAC,QAAQ,GAAG,CAAC,EAAC,MAAM,EAAE,OAAO,EAAuC,KAAK,IAAI,CAAC,aAAa,CAAC,EAAC,MAAM,EAAE,OAAO,EAAC,CAAC,CAAA;UAClH,OAAO,CAAC,UAAU,CAAC,SAAS,CAAC,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;OAEjE;MAED,aAAa,CAAE,EAAC,MAAM,EAAE,OAAO,EAAqC;UAClE,MAAM,CAAC,OAAO,EAAE,GAAG,OAAO,CAAC,GAAG,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;UACjD,MAAM,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;UAC/B,MAAM,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;UACvD,IAAI,IAAI,CAAC,OAAO,CAAC,iBAAiB,EAAE,KAAK,OAAO,CAAC,iBAAiB,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE;cAC7E,IAAI,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE;kBACjC,IAAI,IAAI,CAAC,MAAM,EAAE;sBACf,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,KAAK,IAAI,MAAM,CAAC,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,KAAK,IAAI,MAAM,CAAC,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,MAAM,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,KAAK,IAAI,MAAM,CAAC,OAAO,CAAC,EAAE;0BACpK,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC;uBACtC;mBACF;uBAAM;sBACL,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC;mBACtC;eACF;WACF;OACF;;;;MAKD,MAAM;UACJ,OAAO,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;OAClC;GACF;;QCrFY,iBAAiB;MAM5B,YAAa,UAA4B;UACvC,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;UAC7B,IAAI,CAAC,YAAY,GAAG,IAAI,GAAG,EAAE,CAAC;OAC/B;;;;MAKD,GAAG,CAAE,cAA+B;UAClC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,cAAc,CAAC,EAAE,CAAC,EAAE;cAChC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,cAAc,CAAC,EAAE,EAAE,IAAI,UAAU,CAAC,IAAI,EAAE,cAAc,CAAC,SAAS,EAAE;kBACtF,EAAE,EAAE,cAAc,CAAC,EAAE;kBACrB,IAAI,EAAE,cAAc,CAAC,IAAI;kBACzB,QAAQ,EAAE,cAAc,CAAC,QAAQ;kBACjC,MAAM,EAAE,cAAc,CAAC,MAAM;kBAC7B,OAAO,EAAE,cAAc,CAAC,OAAO;kBAC/B,QAAQ,EAAE,cAAc,CAAC,QAAQ;eAClC,CAAC,CAAC,CAAC;cACJ,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,aAAa,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,cAAc,CAAC,EAAE,CAAe,CAAC,CAAC;cACzF,OAAO,IAAI,CAAC;WACb;UACD,OAAO,KAAK,CAAC;OACd;;;;MAKD,MAAM,CAAE,oBAA2C;UACjD,MAAM,EAAE,GAAG,IAAI,CAAC,mBAAmB,CAAC,oBAAoB,CAAC,CAAC;UAC1D,MAAM,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,EAAE,CAAe,CAAC;UAC3D,MAAM,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;UAC7C,IAAI,OAAO,EAAE;cACX,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,UAAU,CAAC,QAA2E,CAAC,CAAC;WACzI;UACD,OAAO,OAAO,CAAC;OAChB;;;;;MAMD,uBAAuB,CAAE,SAAkB;UACzC,MAAM,oBAAoB,GAAG,EAAE,CAAC;UAChC,MAAM,CAAC,GAAG,SAAS,CAAC,iBAAiB,EAAE,CAAC;UACxC,KAAK,MAAM,GAAG,UAAU,CAAC,IAAI,IAAI,CAAC,YAAY,EAAE;cAC9C,IAAI,UAAU,CAAC,SAAS,CAAC,iBAAiB,EAAE,KAAK,CAAC,EAAE;kBAClD,oBAAoB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;eACvC;WACF;UACD,OAAO,oBAAoB,CAAC;OAC7B;;;;MAKD,GAAG,CAAE,oBAA2C;UAC9C,MAAM,EAAE,GAAG,IAAI,CAAC,mBAAmB,CAAC,oBAAoB,CAAC,CAAC;UAC1D,OAAO,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;OAClC;MAED,SAAS;UACP,KAAK,MAAM,GAAG,UAAU,CAAC,IAAI,IAAI,CAAC,YAAY,EAAE;cAC9C,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;WACzB;OACF;MAEO,mBAAmB,CAAE,oBAA2C;UACtE,OAAO,OAAO,oBAAoB,KAAK,QAAQ,GAAG,oBAAoB,GAAG,oBAAoB,CAAC,EAAE,CAAC;OAClG;GACF;;QC9DY,IAAI;MAUf,YAAa,QAAmB,EAAE,OAAqB;UACrD,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;UACvB,IAAI,OAAO,QAAQ,CAAC,MAAM,KAAK,QAAQ,EAAE;cACvC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,SAAS,CAAC,KAAK,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;WAClF;eAAM;cACL,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAC;WAC/B;UAED,IAAI,CAAC,MAAM,GAAG,IAAI,GAAG,CAAC,KAAK,CAAC,IAAI,CAAE,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,MAAM,CAAC,GAAG,EAAyB,CAAC,MAAM,EAAE,CAAC,CAAC,MAAM,CAAC,KAAK,IAAI,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,MAAM,IAAI,MAAM,CAAC,IAAI,KAAK,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;UAC9L,IAAI,CAAC,WAAW,GAAG,IAAI,WAAW,CAAC,IAAI,EAAE,QAAQ,CAAC,WAAW,CAAC,CAAC;OAChE;;;;MAKD,MAAM;UACJ,OAAO,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;OAClC;;;;MAKD,IAAI;UACF,OAAO,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;OAC5B;;;;MAKD,IAAI,IAAI;UACN,OAAO,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC;OACzB;;;;MAKD,IAAI,IAAI;UACN,OAAO;cACL,MAAM,EAAE,IAAI,CAAC,IAAI;cACjB,WAAW,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI;WACnC,CAAC;OACH;GACF;;EClED,MAAMA,UAAQ,GAAG,OAAO,CAAC;AAEzB,QAAa,WAAW;MAKtB,YAAa,UAA4B;UACvC,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;UAC7B,IAAI,CAAC,MAAM,GAAG,IAAI,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,CAACA,UAAQ,EAAE,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,IAAmB,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAmB,CAAC,CAAC,CAAC;OAChK;MAED,GAAG,CAAE,gBAAmC;UACtC,MAAM,MAAM,GAAG,IAAI,CAAC,aAAa,CAAC,gBAAgB,CAAC,CAAC;UACpD,IAAI,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;UACxC,IAAI,CAAC,IAAI,EAAE;;cAET,IAAI,GAAG,IAAI,IAAI,CAAC;kBACd,MAAM;eACP,EAAE,IAAI,CAAC,CAAC;cACT,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;WACpC;UACD,OAAO,IAAI,CAAC;OACb;MAED,MAAM,CAAE,gBAAmC;UACzC,MAAM,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC,gBAAgB,CAAC,CAAC;UAClD,IAAI,CAAC,IAAI;cAAE,OAAO,KAAK,CAAC;UACxB,MAAM,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;UAE9C,IAAI,CAAC,IAAI,EAAE,CAAC;UACZ,OAAO,OAAO,CAAC;OAChB;MAED,IAAI;UACF,IAAI,QAAQ,GAAoB,EAAE,CAAC;UACnC,KAAK,MAAM,GAAG,IAAI,CAAC,IAAI,IAAI,CAAC,MAAM,EAAE;cAClC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;WAC1B;UACD,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,CAACA,UAAQ,EAAE,QAAQ,CAAC,CAAC;OAC3D;MAEO,aAAa,CAAE,gBAAmC;UACxD,OAAO,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,KAAK,CAAC,SAAS,CAAC,OAAO,gBAAgB,KAAK,QAAQ,GAAG,gBAAgB,GAAG,gBAAgB,CAAC,IAAI,CAAC,CAAC;OACnI;GAEF;;;;;;ECzCD,MAAM,EAAE;MAQN,YAAa,UAA4B;UACvC,IAAI,CAAC,GAAG,GAAG,UAAU,CAAC,SAAS,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,CAAuB,CAAC;UAC3E,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;UAC7B,IAAI,CAAC,SAAS,GAAG,iCAAiC,CAAC;UACnD,IAAI,IAAI,CAAC,GAAG,EAAE;cACZ,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,kBAAkB,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;WAC1D;OACF;MAED,SAAS;UACP,IAAI,IAAI,CAAC,GAAG,EAAE;cACZ,IAAI,CAAC,GAAG,CAAC,cAAc,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;WACzC;OACF;MAED,aAAa,CAAE,UAAuB;UACpC,MAAM,CAAC,cAAc,EAAE,WAAW,CAAC,GAAG,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;UACrE,MAAM,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,GAAG,EAAwB,CAAC;UAClE,KAAK,MAAM,GAAG,KAAK,CAAC,IAAI,MAAM,EAAE;cAC9B,MAAM,GAAG,GAAG,KAAK,CAAC,GAAqB,CAAC;cACxC,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,oBAAoB,cAAc,IAAI,CAAC,EAAE;;kBAE7D,GAAG,CAAC,aAAa,CAAC,OAAO,CAAiB,CAAC,SAAS,IAAI,wDAAwD,cAAc,KAAK,cAAc,4CAA4C,cAAc,SAAS,CAAC;eACvN;cACD,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,qBAAqB,cAAc,iCAAiC,WAAW,IAAI,CAAC,EAAE;;kBAEzG,MAAM,MAAM,GAAG,GAAG,CAAC,aAAa,CAAC,qBAAqB,cAAc,IAAI,CAAqB,CAAC;kBAC9F,MAAM,CAAC,SAAS,IAAI,6DAA6D,WAAW,KAAK,WAAW,WAAW,CAAC;kBACvH,MAAM,CAAC,aAAa,CAAC,uBAAuB,WAAW,IAAI,CAAqB,CAAC,gBAAgB,CAAC,OAAO,EAAG,KAAK,IAAI,IAAI,CAAC,mBAAmB,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC;kBAC7J,GAAG,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAoB,CAAC,SAAS,IAAI,0BAA0B,WAAW,oBAAoB,cAAc,0LAA0L,CAAC;eACtU;;cAGD,MAAM,OAAO,GAAG,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,gBAAgB,CAAC,yBAAyB,WAAW,qBAAqB,cAAc,YAAY,CAAC,CAAqB,CAAC;cAC1J,MAAM,GAAG,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,IAAI,KAAK,IAAI,CAAC,gBAAgB,CAAC,wBAAwB,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC,gBAAgB,CAAC,wBAAwB,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;cAC7J,GAAG,CAAC,SAAS,IAAI,cAAc;mBAC5B,OAAO,CAAC,MAAM,EAAE,UAAU,CAAC,EAAE,CAAC;mBAC9B,OAAO,CAAC,cAAc,EAAE,UAAU,CAAC,IAAI,CAAC;mBACxC,OAAO,CAAC,WAAW,EAAE,KAAK,CAAC,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,GAAG,UAAU,GAAG,EAAE,CAAC;mBACzE,OAAO,CAAC,YAAY,EAAE,KAAK,CAAC,WAAW,CAAC,QAAQ,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE,CAAC,GAAG,UAAU,GAAG,EAAE,CAAC,CAAC;cAEzF,GAAG,CAAC,aAAa,CAAC,uBAAuB,WAAW,IAAI,CAAqB,CAAC,KAAK,EAAE,CAAC;WACxF;OACF;MAED,QAAQ,CAAE,KAAa;UACrB,IAAI,GAAgC,CAAC;UACrC,IAAI,IAAI,CAAC,GAAG,EAAE;cACZ,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;cAClD,GAAG,CAAC,SAAS,GAAG,YAAY,CAAC;cAC5B,GAAG,CAAC,aAAa,CAAC,QAAQ,CAAqB,CAAC,SAAS,GAAG,KAAK,CAAC,IAAI,CAAC;cACxE,IAAI,KAAK,CAAC,OAAO,EAAE;kBACjB,GAAG,CAAC,gBAAgB,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,GAAG,EAAE,CAAC;eACrD;cAED,MAAM,WAAW,GAAGC,cAAU,CAAC,UAAU,CAAC,GAAG,CAAC,SAAS,IAAI,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,WAAW,CAAC,uBAAuB,CAAC,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,KAAK,EAAE,KAAK,KAAK,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC;cAElL,MAAM,UAAU,GAIZ,EAAE,CAAC;cACP,KAAK,MAAM,UAAU,IAAI,WAAW,EAAE;kBACpC,MAAM,CAAC,cAAc,EAAE,WAAW,CAAC,GAAG,UAAU,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;kBACrE,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,EAAE;sBAC/B,UAAU,CAAC,cAAc,CAAC,GAAG,EAAE,CAAC;mBACjC;kBACD,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,CAAC,WAAW,CAAC,EAAE;sBAC5C,UAAU,CAAC,cAAc,CAAC,CAAC,WAAW,CAAC,GAAG,EAAE,CAAC;mBAC9C;kBACD,UAAU,CAAC,cAAc,CAAC,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;eAC1D;cAED,IAAI,YAAY,GAAG,EAAE,CAAC;cACtB,IAAI,wBAAwB,GAAG,KAAK,CAAC;cACrC,IAAI,UAAU,GAAG,KAAK,CAAC;cACvB,KAAK,MAAM,cAAc,IAAI,UAAU,EAAE;kBACvC,YAAY,IAAI,wDAAwD,cAAc,KAAK,cAAc,4CAA4C,cAAc,IAAI,CAAC;kBACxK,KAAK,MAAM,WAAW,IAAI,UAAU,CAAC,cAAc,CAAC,EAAE;sBACpD,IAAI,wBAAwB,EAAE;;0BAE5B,UAAU,GAAG,KAAK,CAAC;0BACnB,YAAY,IAAI,6DAA6D,WAAW,KAAK,WAAW,WAAW,CAAC;uBACrH;2BAAM;;0BAEL,UAAU,GAAG,IAAI,CAAC;0BAClB,wBAAwB,GAAG,IAAI,CAAC;0BAChC,YAAY,IAAI,0GAA0G,WAAW,mBAAmB,WAAW,WAAW,CAAC;uBAChL;sBACD,MAAM,OAAO,GAAgB,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;sBAC1C,IAAI,MAAM,GAAG,CAAC,CAAC;sBACf,KAAK,MAAM,UAAU,IAAI,WAAW,EAAE;0BACpC,IAAI,UAAU,CAAC,QAAQ,KAAK,GAAG,cAAc,IAAI,WAAW,EAAE,EAAE;8BAC9D,IAAI,OAAO,CAAC,MAAM,KAAK,MAAM,EAAE;kCAC7B,MAAM,GAAG,CAAC,CAAC;+BACZ;8BACD,OAAO,CAAC,MAAM,CAAC,CAAC,IAAI,CAClB,cAAc;mCACX,OAAO,CAAC,MAAM,EAAE,UAAU,CAAC,EAAE,CAAC;mCAC9B,OAAO,CAAC,cAAc,EAAE,UAAU,CAAC,IAAI,CAAC;mCACxC,OAAO,CAAC,WAAW,EAAE,KAAK,CAAC,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,GAAG,UAAU,GAAG,EAAE,CAAC;mCACzE,OAAO,CAAC,YAAY,EAAE,KAAK,CAAC,WAAW,CAAC,QAAQ,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE,CAAC,GAAG,UAAU,GAAG,EAAE,CAAC,CAC1F,CAAC;8BACF,MAAM,EAAE,CAAC;2BACV;uBACF;sBACD,IAAI,cAAc,GAAG,0BAA0B,WAAW,oBAAoB,cAAc,KAAK,UAAU,GAAG,EAAE,GAAG,6CAA6C,wEAAwE,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,6BAA6B,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,6BAA6B,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,oBAAoB,CAAC;sBAC/W,GAAG,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAiB,CAAC,SAAS,IAAI,cAAc,CAAC;mBAC9E;kBACD,YAAY,IAAI,OAAO,CAAC;eACzB;cACA,GAAG,CAAC,aAAa,CAAC,OAAO,CAAiB,CAAC,SAAS,GAAG,YAAY,CAAC;cACrE,GAAG,CAAC,gBAAgB,CAAC,QAAQ,EAAE,KAAK,IAAI,IAAI,CAAC,wBAAwB,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC;cACrF,GAAG,CAAC,gBAAgB,CAAC,OAAO,EAAE,KAAK,IAAI,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC;WAE1E;;UAGD,OAAO,GAAG,CAAC;OACZ;MAED,WAAW,CAAE,KAAa;UACxB,IAAI,KAAK,CAAC,GAAG,EAAE;cACb,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;WAC/B;OACF;MAED,YAAY,CAAE,KAAa;UACzB,IAAI,KAAK,CAAC,GAAG,EAAE;cACb,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;cACxB,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;WAClC;OACF;MAED,wBAAwB,CAAE,KAAa,EAAE,KAAa;UACpD,MAAM,MAAM,GAAG,KAAK,CAAC,MAA0B,CAAC;UAChD,MAAM,UAAU,GAAG,MAAM,CAAC,YAAY,CAAC,iBAAiB,CAAW,CAAC;UACpE,IAAI,MAAM,CAAC,OAAO,EAAE;cAClB,KAAK,CAAC,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;WACnC;eAAM;cACL,KAAK,CAAC,WAAW,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;WACtC;OACF;MAED,aAAa,CAAE,KAAa;UAC1B,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,eAAe,EAAE;cAC9B;kBACE,IAAI,EAAE,KAAK;kBACX,KAAK,EAAE,WAAW;eACnB;cACD;kBACE,IAAI,EAAE,QAAQ;eACf;WACF,EAAE,QAAQ;cACT,IAAI,QAAQ,KAAK,KAAK,EAAE;kBACtB,MAAM,MAAM,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC;kBAC9B,IAAI,CAAC,MAAM,EAAE;sBACX,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,yBAAyB,CAAC,CAAC;mBAC5C;uBAAM;sBACL,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC;mBACvB;eACF;WACF,CAAC,CAAC;OACJ;MAED,aAAa,CAAE,KAAa;UAC1B,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,8CAA8C,EAAE,OAAO;cACrE,IAAI,OAAO,EAAE;kBACX,MAAM,MAAM,GAAG,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;kBACrC,IAAI,CAAC,MAAM,EAAE;sBACX,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,yBAAyB,CAAC,CAAC;mBAC5C;uBAAM;sBACL,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC;mBACvB;eACF;WACF,CAAC,CAAC;OACJ;MAED,UAAU;UACR,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,6CAA6C,EAAE,IAAI;cACjE,IAAI,IAAI,EAAE;kBACR,MAAM,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,GAAG,CAAC;sBACxC,IAAI;mBACL,CAAC,CAAC;kBACH,IAAI,MAAM,EAAE;sBACV,IAAI,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC;mBACvB;uBAAM;sBACL,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,iCAAiC,CAAC,CAAC;mBACpD;eACF;WACF,CAAC,CAAC;OACJ;MAED,aAAa,CAAE,KAAkB,EAAE,KAAa;UAC9C,MAAM,OAAO,GAAG,KAAK,CAAC,MAAyB,CAAC;UAChD,IAAI,OAAO,CAAC,OAAO,KAAK,GAAG,EAAE;cAC3B,MAAM,MAAM,GAAG,OAAO,CAAC,YAAY,CAAC,aAAa,CAAC,CAAC;cACnD,IAAI,MAAM,EAAE;kBACV,QAAQ,MAAM;sBACZ,KAAK,QAAQ;0BACX,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;0BAC5B,MAAM;sBACN,KAAK,QAAQ;0BACX,IAAI,CAAC,UAAU,EAAE,CAAC;0BACpB,MAAM;sBACN,KAAK,QAAQ;0BACX,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;0BAC5B,MAAM;mBACP;eACF;mBAAM;kBACL,MAAM,WAAW,GAAG,OAAO,CAAC,YAAY,CAAC,kBAAkB,CAAC,CAAC;kBAC7D,IAAG,WAAW,EAAE;sBACd,IAAI,CAAC,mBAAmB,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;mBACxC;eACF;WACF;OACF;MAED,mBAAmB,CAAE,KAAkB,EAAE,KAAa;UACpD,MAAM,GAAG,GAAG,KAAK,CAAC,GAAqB,CAAC;UACxC,MAAM,iBAAiB,GAAI,KAAK,CAAC,MAAsB,CAAC,YAAY,CAAC,kBAAkB,CAAC,CAAC;UACzF,MAAM,cAAc,GAAM,KAAK,CAAC,MAAsB,CAAC,aAA6B,CAAC,aAA6B,CAAC,YAAY,CAAC,eAAe,CAAC,CAAC;UACjJ,MAAM,SAAS,GAAG,GAAG,CAAC,aAAa,CAAC,yBAAyB,iBAAiB,qBAAqB,cAAc,IAAI,CAAmB,CAAC;UACzI,IAAI,SAAS,CAAC,SAAS,CAAC,QAAQ,CAAC,cAAc,CAAC,EAAE;cAChD,MAAM,mBAAmB,GAAO,KAAK,CAAC,MAAsB,CAAC,aAA6B,CAAC,aAA6B,CAAC,aAA6B,CAAC,aAAa,CAAC,kBAAkB,CAAgB,CAAC;cACxM,IAAI,mBAAmB,EAAE;kBACvB,mBAAmB,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;kBAC9C,mBAAmB,CAAC,eAAe,CAAC,eAAe,CAAC,CAAC;kBACrD,MAAM,SAAS,GAAG,GAAG,CAAC,aAAa,CAAC,yBAAyB,mBAAmB,CAAC,YAAY,CAAC,kBAAkB,CAAC,qBAAuB,mBAAmB,CAAC,aAA6B,CAAC,aAA6B,CAAC,YAAY,CAAC,eAAe,CAAC,IAAI,CAAmB,CAAC;kBAC7Q,SAAS,CAAC,SAAS,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;kBACxC,SAAS,CAAC,YAAY,CAAC,OAAO,EAAE,eAAe,CAAC,CAAC;eAClD;cACA,KAAK,CAAC,MAAsB,CAAC,YAAY,CAAC,OAAO,EAAE,sCAAsC,CAAC,CAAC;cAC3F,KAAK,CAAC,MAAsB,CAAC,YAAY,CAAC,eAAe,EAAE,EAAE,CAAC,CAAC;cAChE,SAAS,CAAC,SAAS,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC;cAC3C,SAAS,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;WACrC;OACF;GAEF;;QCzPY,eAAe;MAY1B,YAAa,EAAwB;UACnC,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;UACpB,IAAI,CAAC,EAAE,GAAG,IAAI,EAAE,CAAC,IAAI,CAAC,CAAC;UACvB,IAAI,CAAC,WAAW,GAAG,IAAI,iBAAiB,CAAC,IAAI,CAAC,CAAC;UAC/C,IAAI,CAAC,MAAM,GAAG,IAAI,YAAY,CAAC,IAAI,CAAC,CAAC;UACrC,IAAI,CAAC,KAAK,GAAG,IAAI,WAAW,CAAC,IAAI,CAAC,CAAC;OACpC;;;;MAKD,SAAS;UACP,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAC;UAC7B,IAAI,CAAC,EAAE,CAAC,SAAS,EAAE,CAAC;OACrB;;;;MAKD,IAAI;UACF,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;UACnB,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;OACnB;GAGF;;ACzCD,iBAAe,CAAC,MAAe,EAAE,IAAa,EAAE,EAAW;EAI3D,CAAC,CAAC;;ECIK,MAAM,oBAAoB,GAAqC;MACpE;UACE,QAAQ;UACR,EAAE,EAAE,SAAS;UACb,OAAO,EAAE,MAAM;UACf,MAAM,EAAE;cACN,KAAK,EAAE,IAAI;WACZ;UACD,OAAO,EAAE;cACP,QAAQ,EAAE,+BAA+B;cACzC,IAAI,EAAE,wBAAwB;WAC/B;OACF;MACD;UACE,QAAQ;UACR,EAAE,EAAE,YAAY;UAChB,OAAO,EAAE,SAAS;UAClB,MAAM,EAAE;cACN,KAAK,EAAE,IAAI;WACZ;UACD,OAAO,EAAE;cACP,QAAQ,EAAE,+BAA+B;cACzC,IAAI,EAAE,2BAA2B;WAClC;OACF;MACD;UACE,QAAQ;UACR,EAAE,EAAE,SAAS;UACb,OAAO,EAAE,MAAM;UACf,MAAM,EAAE;cACN,KAAK,EAAE,IAAI;WACZ;UACD,OAAO,EAAE;cACP,QAAQ,EAAE,+BAA+B;cACzC,IAAI,EAAE,wBAAwB;WAC/B;OACF;MACD;UACE,QAAQ;UACR,EAAE,EAAE,aAAa;UACjB,OAAO,EAAE,MAAM;UACf,MAAM,EAAE;cACN,KAAK,EAAE,IAAI;WACZ;UACD,OAAO,EAAE;cACP,QAAQ,EAAE,mCAAmC;cAC7C,IAAI,EAAE,oBAAoB;WAC3B;OACF;MACD;UACE,QAAQ;UACR,EAAE,EAAE,eAAe;UACnB,OAAO,EAAE,MAAM;UACf,MAAM,EAAE;cACN,KAAK,EAAE,IAAI;WACZ;UACD,OAAO,EAAE;cACP,QAAQ,EAAE,mCAAmC;cAC7C,IAAI,EAAE,wBAAwB;WAC/B;OACF;MACD;UACE,QAAQ;UACR,EAAE,EAAE,QAAQ;UACZ,OAAO,EAAE,KAAK;UACd,MAAM,EAAE;cACN,KAAK,EAAE,IAAI;WACZ;UACD,OAAO,EAAE;cACP,QAAQ,EAAE,+BAA+B;cACzC,IAAI,EAAE,uBAAuB;WAC9B;OACF;MACD;UACE,QAAQ;UACR,EAAE,EAAE,YAAY;UAChB,OAAO,EAAE,KAAK;UACd,MAAM,EAAE;cACN,KAAK,EAAE,IAAI;WACZ;UACD,OAAO,EAAE;cACP,QAAQ,EAAE,mCAAmC;cAC7C,IAAI,EAAE,mBAAmB;WAC1B;OACF;MACD;UACE,QAAQ;UACR,EAAE,EAAE,cAAc;UAClB,OAAO,EAAE,KAAK;UACd,MAAM,EAAE;cACN,KAAK,EAAE,IAAI;WACZ;UACD,OAAO,EAAE;cACP,QAAQ,EAAE,mCAAmC;cAC7C,IAAI,EAAE,uBAAuB;WAC9B;OACF;MACD;UACE,QAAQ;UACR,EAAE,EAAE,kBAAkB;UACtB,OAAO,EAAE,eAAe;UACxB,MAAM,EAAE;cACN,KAAK,EAAE,IAAI;WACZ;UACD,OAAO,EAAE;cACP,QAAQ,EAAE,+BAA+B;cACzC,IAAI,EAAE,4CAA4C;WACnD;OACF;MACD;UACE,QAAQ;UACR,EAAE,EAAE,sBAAsB;UAC1B,OAAO,EAAE,eAAe;UACxB,MAAM,EAAE;cACN,KAAK,EAAE,IAAI;WACZ;UACD,OAAO,EAAE;cACP,QAAQ,EAAE,mCAAmC;cAC7C,IAAI,EAAE,wCAAwC;WAC/C;OACF;MACD;UACE,QAAQ;UACR,EAAE,EAAE,wBAAwB;UAC5B,OAAO,EAAE,eAAe;UACxB,MAAM,EAAE;cACN,KAAK,EAAE,IAAI;WACZ;UACD,OAAO,EAAE;cACP,QAAQ,EAAE,mCAAmC;cAC7C,IAAI,EAAE,4CAA4C;WACnD;OACF;MACD;UACE,QAAQ;UACR,EAAE,EAAE,UAAU;UACd,OAAO,EAAE,OAAO;UAChB,MAAM,EAAE;cACN,KAAK,EAAE,IAAI;WACZ;UACD,OAAO,EAAE;cACP,QAAQ,EAAE,+BAA+B;cACzC,IAAI,EAAE,kBAAkB;WACzB;OACF;MACD;UACE,QAAQ;UACR,EAAE,EAAE,cAAc;UAClB,OAAO,EAAE,WAAW;UACpB,MAAM,EAAE;cACN,KAAK,EAAE,IAAI;WACZ;UACD,OAAO,EAAE;cACP,QAAQ,EAAE,0BAA0B;cACpC,IAAI,EAAE,sBAAsB;WAC7B;OACF;MACD;UACE,QAAQ;UACR,EAAE,EAAE,gBAAgB;UACpB,OAAO,EAAE,aAAa;UACtB,MAAM,EAAE;cACN,KAAK,EAAE,IAAI;WACZ;UACD,OAAO,EAAE;cACP,QAAQ,EAAE,0BAA0B;cACpC,IAAI,EAAE,wBAAwB;WAC/B;OACF;MACD;UACE,QAAQ;UACR,EAAE,EAAE,mBAAmB;UACvB,OAAO,EAAE,gBAAgB;UACzB,MAAM,EAAE;cACN,KAAK,EAAE,IAAI;WACZ;UACD,OAAO,EAAE;cACP,QAAQ,EAAE,0BAA0B;cACpC,IAAI,EAAE,oBAAoB;WAC3B;OACF;MACD;UACE,QAAQ;UACR,EAAE,EAAE,mBAAmB;UACvB,OAAO,EAAE,gBAAgB;UACzB,MAAM,EAAE;cACN,KAAK,EAAE,IAAI;WACZ;UACD,OAAO,EAAE;cACP,QAAQ,EAAE,0BAA0B;cACpC,IAAI,EAAE,oBAAoB;WAC3B;OACF;MACD;UACE,QAAQ;UACR,EAAE,EAAE,mBAAmB;UACvB,OAAO,EAAE,gBAAgB;UACzB,MAAM,EAAE;cACN,KAAK,EAAE,IAAI;WACZ;UACD,OAAO,EAAE;cACP,QAAQ,EAAE,0BAA0B;cACpC,IAAI,EAAE,oBAAoB;WAC3B;OACF;MACD;UACE,QAAQ;UACR,EAAE,EAAE,iBAAiB;UACrB,OAAO,EAAE,cAAc;UACvB,MAAM,EAAE;cACN,KAAK,EAAE,IAAI;WACZ;UACD,OAAO,EAAE;cACP,QAAQ,EAAE,0BAA0B;cACpC,IAAI,EAAE,kBAAkB;WACzB;OACF;MACD;UACE,QAAQ;UACR,EAAE,EAAE,SAAS;UACb,OAAO,EAAE,MAAM;UACf,MAAM,EAAE;cACN,KAAK,EAAE,IAAI;WACZ;UACD,OAAO,EAAE;cACP,QAAQ,EAAE,mCAAmC;cAC7C,IAAI,EAAE,iBAAiB;WACxB;OACF;MACD;UACE,QAAQ;UACR,EAAE,EAAE,UAAU;UACd,OAAO,EAAE,QAAQ;UACjB,MAAM,EAAE;cACN,KAAK,EAAE,IAAI;WACZ;UACD,OAAO,EAAE;cACP,QAAQ,EAAE,mCAAmC;cAC7C,IAAI,EAAE,aAAa;WACpB;OACF;MACD;UACE,QAAQ;UACR,EAAE,EAAE,WAAW;UACf,OAAO,EAAE,SAAS;UAClB,MAAM,EAAE;cACN,KAAK,EAAE,IAAI;WACZ;UACD,OAAO,EAAE;cACP,QAAQ,EAAE,mCAAmC;cAC7C,IAAI,EAAE,cAAc;WACrB;OACF;MACD;UACE,QAAQ;UACR,EAAE,EAAE,cAAc;UAClB,OAAO,EAAE,YAAY;UACrB,MAAM,EAAE;cACN,KAAK,EAAE,IAAI;WACZ;UACD,OAAO,EAAE;cACP,QAAQ,EAAE,0BAA0B;cACpC,IAAI,EAAE,kBAAkB;WACzB;OACF;MACD;UACE,QAAQ;UACR,EAAE,EAAE,QAAQ;UACZ,OAAO,EAAE,KAAK;UACd,MAAM,EAAE;cACN,KAAK,EAAE,IAAI;WACZ;UACD,OAAO,EAAE;cACP,QAAQ,EAAE,mCAAmC;cAC7C,IAAI,EAAE,2BAA2B;WAClC;OACF;MACD;UACE,QAAQ;UACR,EAAE,EAAE,UAAU;UACd,OAAO,EAAE,OAAO;UAChB,MAAM,EAAE;cACN,KAAK,EAAE,IAAI;WACZ;UACD,OAAO,EAAE;cACP,QAAQ,EAAE,mCAAmC;cAC7C,IAAI,EAAE,gCAAgC;WACvC;OACF;MACD;UACE,QAAQ;UACR,EAAE,EAAE,UAAU;UACd,OAAO,EAAE,OAAO;UAChB,MAAM,EAAE;cACN,KAAK,EAAE,IAAI;WACZ;UACD,OAAO,EAAE;cACP,QAAQ,EAAE,mCAAmC;cAC7C,IAAI,EAAE,6BAA6B;WACpC;OACF;MACD;UACE,QAAQ;UACR,EAAE,EAAE,YAAY;UAChB,OAAO,EAAE,SAAS;UAClB,MAAM,EAAE;cACN,KAAK,EAAE,IAAI;WACZ;UACD,OAAO,EAAE;cACP,QAAQ,EAAE,mCAAmC;cAC7C,IAAI,EAAE,kCAAkC;WACzC;OACF;MACD;UACE,QAAQ;UACR,EAAE,EAAE,mBAAmB;UACvB,OAAO,EAAE,iBAAiB;UAC1B,MAAM,EAAE;cACN,KAAK,EAAE,IAAI;WACZ;UACD,OAAO,EAAE;cACP,QAAQ,EAAE,0BAA0B;cACpC,IAAI,EAAE,qBAAqB;WAC5B;OACF;MACD;UACE,QAAQ;UACR,EAAE,EAAE,mBAAmB;UACvB,OAAO,EAAE,iBAAiB;UAC1B,MAAM,EAAE;cACN,KAAK,EAAE,IAAI;WACZ;UACD,OAAO,EAAE;cACP,QAAQ,EAAE,0BAA0B;cACpC,IAAI,EAAE,qBAAqB;WAC5B;OACF;MACD;UACE,QAAQ;UACR,EAAE,EAAE,iBAAiB;UACrB,OAAO,EAAE,eAAe;UACxB,MAAM,EAAE;cACN,KAAK,EAAE,IAAI;WACZ;UACD,OAAO,EAAE;cACP,QAAQ,EAAE,0BAA0B;cACpC,IAAI,EAAE,mBAAmB;WAC1B;OACF;MACD;UACE,QAAQ;UACR,EAAE,EAAE,mBAAmB;UACvB,OAAO,EAAE,iBAAiB;UAC1B,MAAM,EAAE;cACN,KAAK,EAAE,IAAI;WACZ;UACD,OAAO,EAAE;cACP,QAAQ,EAAE,0BAA0B;cACpC,IAAI,EAAE,qBAAqB;WAC5B;OACF;MACD;UACE,QAAQ;UACR,EAAE,EAAE,gBAAgB;UACpB,OAAO,EAAE,cAAc;UACvB,MAAM,EAAE;cACN,KAAK,EAAE,IAAI;WACZ;UACD,OAAO,EAAE;cACP,QAAQ,EAAE,2BAA2B;cACrC,IAAI,EAAE,2BAA2B;WAClC;OACF;MACD;UACE,QAAQ;UACR,EAAE,EAAE,eAAe;UACnB,OAAO,EAAE,aAAa;UACtB,MAAM,EAAE;cACN,KAAK,EAAE,IAAI;WACZ;UACD,OAAO,EAAE;cACP,QAAQ,EAAE,2BAA2B;cACrC,IAAI,EAAE,8BAA8B;WACrC;OACF;MACD;UACE,QAAQ;UACR,EAAE,EAAE,mBAAmB;UACvB,OAAO,EAAE,iBAAiB;UAC1B,MAAM,EAAE;cACN,KAAK,EAAE,IAAI;WACZ;UACD,OAAO,EAAE;cACP,QAAQ,EAAE,2BAA2B;cACrC,IAAI,EAAE,6BAA6B;WACpC;OACF;GACF,CAAC;;ACrZF,mBAAe,CAAC,MAAe,EAAE,IAAa,EAAE,EAAW;EAI3D,CAAC,CAAC;;ECIK,MAAM,0BAA0B,GAA0C;MAC/E;oBACEC,UAAQ;UACR,EAAE,EAAE,SAAS;UACb,OAAO,EAAE,SAAS;UAClB,OAAO,EAAE;cACP,QAAQ,EAAE,mCAAmC;cAC7C,IAAI,EAAE,2BAA2B;WAClC;OACF;GACF,CAAC;;ECCF,MAAM,YAAY,GAAG,iCAAiC,CAAC;AAEvDD,gBAAU,CAAC,iBAAiB,CAAC,YAAY,EAAE,EAAE;MAE3C,MAAM,EAAE,GAAG,IAAI,eAAe,CAAC,EAAE,CAAC,CAAC;MAEnC,KAAK,MAAM,UAAU,IAAI,oBAAoB,EAAE;UAC7C,MAAM,EAAC,EAAE,EAAE,OAAO,EAAE,QAAQ,EAAE,MAAM,EAAC,GAAG,UAAU,CAAC;UACnD,EAAE,CAAC,WAAW,CAAC,GAAG,CAAC;cACjB,EAAE;cACF,OAAO;cACP,QAAQ;cACR,MAAM;cACN,SAAS,EAAE,YAAY;cACvB,QAAQ,EAAE,UAAU,CAAC,OAAO,CAAC,QAAQ;cACrC,IAAI,EAAE,UAAU,CAAC,OAAO,CAAC,IAAI;WAC9B,CAAC,CAAC;OACJ;MAED,KAAK,MAAM,UAAU,IAAI,0BAA0B,EAAE;UACnD,MAAM,EAAC,EAAE,EAAE,OAAO,EAAE,QAAQ,EAAE,MAAM,EAAC,GAAG,UAAU,CAAC;UACnD,EAAE,CAAC,WAAW,CAAC,GAAG,CAAC;cACjB,EAAE;cACF,OAAO;cACP,QAAQ;cACR,MAAM;cACN,SAAS,EAAE,YAAY;cACvB,QAAQ,EAAE,UAAU,CAAC,OAAO,CAAC,QAAQ;cACrC,IAAI,EAAE,UAAU,CAAC,OAAO,CAAC,IAAI;WAC9B,CAAC,CAAC;OACJ;MAED,IAAI,CAAC,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC,eAAe,CAAC,EAAE;UACnC,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC;cACZ,IAAI,EAAE,eAAe;cACrB,WAAW,EAAE;kBACX,OAAO,EAAE,CAAC,SAAS,EAAE,YAAY,EAAE,aAAa,EAAE,eAAe,EAAE,SAAS,EAAE,YAAY,EAAE,cAAc,EAAE,QAAQ,EAAE,sBAAsB,EAAE,wBAAwB,EAAE,kBAAkB,EAAE,UAAU,EAAE,cAAc,EAAE,gBAAgB,EAAE,iBAAiB,EAAE,mBAAmB,EAAE,mBAAmB,EAAE,mBAAmB,EAAE,cAAc,EAAE,SAAS,EAAE,UAAU,EAAE,WAAW,EAAE,QAAQ,EAAE,UAAU,EAAE,UAAU,EAAE,YAAY,EAAE,iBAAiB,EAAE,mBAAmB,EAAE,mBAAmB,EAAE,mBAAmB,CAAC;kBACjf,QAAQ,EAAE,CAAC,SAAS,EAAE,YAAY,EAAE,aAAa,EAAE,eAAe,EAAE,SAAS,EAAE,YAAY,EAAE,cAAc,EAAE,QAAQ,EAAE,sBAAsB,EAAE,wBAAwB,EAAE,kBAAkB,EAAE,UAAU,EAAE,cAAc,EAAE,gBAAgB,EAAE,iBAAiB,EAAE,mBAAmB,EAAE,mBAAmB,EAAE,mBAAmB,EAAE,cAAc,EAAE,SAAS,EAAE,UAAU,EAAE,WAAW,EAAE,QAAQ,EAAE,UAAU,EAAE,UAAU,EAAE,YAAY,EAAE,iBAAiB,EAAE,mBAAmB,EAAE,mBAAmB,EAAE,mBAAmB,CAAC;eACnf;cACD,OAAO,EAAE,IAAI;WACd,CAAC,CAAC;OACJ;MACD,IAAI,CAAC,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC,WAAW,CAAC,EAAE;UAC/B,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC;cACZ,IAAI,EAAE,WAAW;cACjB,WAAW,EAAE;kBACX,OAAO,EAAE,CAAC,SAAS,EAAE,YAAY,EAAE,SAAS,EAAE,QAAQ,EAAE,kBAAkB,EAAE,UAAU,EAAE,cAAc,EAAE,gBAAgB,EAAE,mBAAmB,EAAE,mBAAmB,CAAC;kBACnK,QAAQ,EAAE,CAAC,SAAS,EAAE,YAAY,EAAE,SAAS,EAAE,QAAQ,EAAE,kBAAkB,EAAE,UAAU,EAAE,cAAc,EAAE,gBAAgB,EAAE,mBAAmB,EAAE,mBAAmB,CAAC;eACrK;cACD,OAAO,EAAE,IAAI;WACd,CAAC,CAAC;OACJ;MACD,IAAI,CAAC,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE;UAC5B,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC;cACZ,IAAI,EAAE,QAAQ;cACd,WAAW,EAAE;kBACX,OAAO,EAAE,EAAE;kBACX,QAAQ,EAAE,EAAE;eACb;cACD,OAAO,EAAE,IAAI;WACd,CAAC,CAAC;OACJ;MAED,EAAE,CAAC,OAAO,CAAC,OAAO,GAAG,EAAE,CAAC;;;;;MAMxB,MAAM,uBAAuB,GAAG,CAAC,SAAkB;UACjD,MAAM,gBAAgB,GAAG,EAAE,CAAC,GAAG,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;UACtD,IAAI,gBAAgB,IAAI,gBAAgB,CAAC,eAAe,EAAE;cAExD,MAAM,WAAW,GAA2B,gBAAgB,CAAC,eAAe,CAAC;cAC7E,KAAK,MAAM,cAAc,IAAI,WAAW,EAAE;kBACxC,EAAE,CAAC,WAAW,CAAC,GAAG,CAAC;sBACjB,SAAS;sBACT,QAAQ,EAAE,cAAc,CAAC,OAAO,CAAC,QAAQ;sBACzC,IAAI,EAAE,cAAc,CAAC,OAAO,CAAC,IAAI;sBACjC,EAAE,EAAE,cAAc,CAAC,EAAE;sBACrB,OAAO,EAAE,cAAc,CAAC,OAAO;sBAC/B,QAAQ,EAAE,cAAc,CAAC,QAAQ;sBACjC,MAAM,EAAE,cAAc,CAAC,MAAM;mBAC9B,CAAC,CAAC;eACJ;WAEF;OACF,CAAC;;;;;MAMF,MAAM,yBAAyB,GAAG,CAAC,SAAkB;UACnD,MAAM,WAAW,GAAG,EAAE,CAAC,WAAW,CAAC,uBAAuB,CAAC,SAAS,CAAC,CAAC;UACtE,KAAK,MAAM,UAAU,IAAI,WAAW,EAAE;cACpC,UAAU,CAAC,MAAM,EAAE,CAAC;WACrB;OACF,CAAC;;;;MAKF,MAAM,wBAAwB,GAAG;UAC/B,MAAM,UAAU,GAAGA,cAAU,CAAC,UAAU,CAAC;UACzC,KAAK,MAAM,SAAS,IAAI,UAAU,EAAE;cAClC,uBAAuB,CAAC,SAAS,CAAC,CAAC;WACpC;OACF,CAAC;MAEF,EAAE,CAAC,MAAM,GAAG;UACVA,cAAU,CAAC,mBAAmB,CAAC,KAAK,CAAC,uBAAuB,CAAC,CAAC;UAC9DA,cAAU,CAAC,qBAAqB,CAAC,KAAK,CAAC,yBAAyB,CAAC,CAAC;UAClE,EAAE,CAAC,EAAE,CAAC,SAAS,EAAE,CAAC;OACnB,CAAC;MAEF,EAAE,CAAC,SAAS,GAAG;UACb,EAAE,CAAC,SAAS,EAAE,CAAC;UACfA,cAAU,CAAC,mBAAmB,CAAC,KAAK,CAAC,uBAAuB,CAAC,CAAC;UAC9DA,cAAU,CAAC,qBAAqB,CAAC,KAAK,CAAC,yBAAyB,CAAC,CAAC;OACnE,CAAC;MAEFA,cAAU,CAAC,mBAAmB,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAC;MAC5DA,cAAU,CAAC,qBAAqB,CAAC,GAAG,CAAC,yBAAyB,CAAC,CAAC;MAChE,wBAAwB,EAAE,CAAC;EAC7B,CAAC,CAAC,CAAC;;;;"}