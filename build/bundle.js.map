{"version":3,"file":"bundle.js","sources":["../src/Permissions/Permissions.ts","../src/Groups/Group.ts","../src/Groups/GroupManager.ts","../src/Permissions/Permission.ts","../src/Permissions/PermissionManager.ts","../src/Users/User.ts","../src/Users/UserManager.ts","../src/UI/index.ts","../src/GroupManagement.ts","../src/Extensions/BlockheadsHandler.ts","../src/Extensions/Blockheads.ts","../src/Extensions/GroupManagementHandler.ts","../src/Extensions/GroupManagement.ts","../src/index.ts"],"sourcesContent":["import { PermissionResolvable, Permission } from \"./Permission\";\r\nimport { Group } from \"../Groups/Group\";\r\nimport { User } from \"../Users/User\";\r\n\r\nexport interface PermissionsSaveData {\r\n  allowed: string[],\r\n  disabled: string[]\r\n}\r\n\r\nexport class Permissions {\r\n\r\n  allowed: Set<string>;\r\n\r\n  disabled: Set<string>;\r\n\r\n  parent: Group|User;\r\n  \r\n  constructor (parent : Group|User, permissions? : PermissionsSaveData) {\r\n    const data = permissions || {\r\n      allowed: [],\r\n      disabled: []\r\n    };\r\n\r\n    this.parent = parent;\r\n    this.allowed = new Set(data.allowed);\r\n    this.disabled = new Set(data.disabled);\r\n  }\r\n\r\n  has (permissionResolvable : PermissionResolvable) {\r\n    const permission = this.resolvePermission(permissionResolvable);\r\n    if (!permission) return false;\r\n    return this.allowed.has(permission.id);\r\n  }\r\n\r\n  add (permissionResolvable : PermissionResolvable, sudo : boolean = false, disabled : boolean = false) : boolean {\r\n    const permission = this.resolvePermission(permissionResolvable);\r\n    if (!permission || (this.allowed.has(permission.id) && !disabled && !this.disabled.has(permission.id)) || (this.disabled.has(permission.id) && !sudo)) return false;\r\n    this.allowed.add(permission.id);\r\n    if (this.parent.type === \"Group\") {\r\n      this.parent.permissionUIAllow(permission, true);\r\n    }\r\n    if (disabled && !this.disabled.has(permission.id)) {\r\n      this.disabled.add(permission.id);\r\n      if (this.parent.type === \"Group\") {\r\n        this.parent.permissionUIDisable(permission, true);\r\n      }\r\n    }\r\n    this.save();\r\n    return true;\r\n  }\r\n\r\n  delete (permissionResolvable : PermissionResolvable, sudo : boolean = false, disabled : boolean = false) : boolean {\r\n    const permission = this.resolvePermission(permissionResolvable);\r\n    if (!permission || (!sudo && this.disabled.has(permission.id))) return false;\r\n    const deleted = this.allowed.delete(permission.id);\r\n    const deletedDisabled = disabled ? this.disabled.delete(permission.id) : false;\r\n    this.save();\r\n    if (deleted && this.parent.type === \"Group\") {\r\n      this.parent.permissionUIAllow(permission, false);\r\n    }\r\n    if (deletedDisabled && this.parent.type === \"Group\") {\r\n      this.parent.permissionUIDisable(permission, false);\r\n    }\r\n    return deleted || deletedDisabled;\r\n  }\r\n\r\n  save () {\r\n    return this.parent.save();\r\n  }\r\n\r\n  private resolvePermission (permissionResolvable : PermissionResolvable) : Permission | undefined {\r\n    return this.parent.manager.management.permissions.get(permissionResolvable);\r\n  }\r\n\r\n  get data () : PermissionsSaveData {\r\n    return {\r\n      allowed: Array.from(this.allowed),\r\n      disabled: Array.from(this.disabled)\r\n    };\r\n  }\r\n}","import { Player } from \"@bhmb/bot\";\r\nimport { GroupManager } from \"./GroupManager\";\r\nimport { Permissions, PermissionsSaveData } from \"../Permissions/Permissions\";\r\nimport { User } from \"../Users/User\";\r\nimport { Permission } from \"../Permissions/Permission\";\r\n\r\nexport interface GroupData {\r\n  name: string;\r\n  permissions?: PermissionsSaveData;\r\n  players?: (Player|string)[];\r\n  managed?: boolean;\r\n};\r\n\r\nexport interface GroupConstructorData extends GroupData {\r\n  id: number;\r\n};\r\n\r\nexport interface GroupSaveData {\r\n  id: number;\r\n  name: string;\r\n  permissions: PermissionsSaveData\r\n  players: string[],\r\n  managed: boolean\r\n};\r\n\r\nexport type GroupResolvable = Group|string|number;\r\n\r\nexport class Group {\r\n\r\n  id: number;\r\n\r\n  name: string;\r\n\r\n  permissions: Permissions;\r\n\r\n  players: Set<Player>;\r\n\r\n  managed: boolean;\r\n\r\n  manager: GroupManager;\r\n\r\n  tab?: HTMLDivElement;\r\n\r\n  type: \"Group\";\r\n\r\n  constructor (groupData : GroupConstructorData, manager : GroupManager) {\r\n    this.manager = manager;\r\n    this.name = groupData.name;\r\n    this.id = groupData.id;\r\n    this.permissions = new Permissions(this, groupData.permissions);\r\n    this.players = new Set((groupData.players || []).map(playerOrName => typeof playerOrName === \"string\" ? this.manager.management.extension.world.getPlayer(playerOrName) : playerOrName));\r\n    this.managed = groupData.managed || false;\r\n    this.tab = manager.management.ui.addGroup(this);\r\n    this.type = \"Group\";\r\n\r\n    if (this.manager.management.users) {\r\n      for (const player of this.players) {\r\n        const user = this.manager.management.users.get(player);\r\n        user.groups.push(this);\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * Rename this group, will return if the operation was successful.\r\n   * @param newName New name\r\n   */\r\n  rename (newName : string) : boolean {\r\n    return this.manager.rename(this, newName);\r\n  }\r\n\r\n  /**\r\n   * Add a player to this group. Will return if the operation was successful.\r\n   * @param playerResolvable \r\n   */\r\n  addPlayer (playerResolvable : Player|User|string) {\r\n    const p = this.manager.management.extension.world.getPlayer(typeof playerResolvable === \"string\" ? playerResolvable : playerResolvable.name);\r\n    if (this.players.has(p) || this.managed) {\r\n      return false;\r\n    } else {\r\n      this.players.add(p);\r\n      this.save();\r\n      return true;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Remove a player from this group. Will return if the operation was successful.\r\n   * @param playerResolvable \r\n   */\r\n  removePlayer (playerResolvable : Player|User|string) {\r\n    const p = this.manager.management.extension.world.getPlayer(typeof playerResolvable === \"string\" ? playerResolvable : playerResolvable.name);\r\n    if (!this.managed && this.players.delete(p)) {\r\n      this.save();\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Change the UI to mark this permission as selected/unselected.\r\n   * @param permission \r\n   */\r\n  permissionUIAllow (permission : Permission, check : boolean) {\r\n    if (this.tab) {\r\n      const input = this.tab.querySelector(`input[data-permission=\"${permission.id}\"]`) as HTMLInputElement;\r\n      input.checked = check;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Change the UI to mark this permission as disabled/not disabled.\r\n   * @param permission \r\n   */\r\n  permissionUIDisable (permission : Permission, disable : boolean) {\r\n    if (this.tab) {\r\n      const input = this.tab.querySelector(`input[data-permission=\"${permission.id}\"]`) as HTMLInputElement;\r\n      input.disabled = disable;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Delete this group, will return if the operation was successful.\r\n   */\r\n  delete () : boolean {\r\n    return this.manager.delete(this);\r\n  }\r\n\r\n  save () {\r\n    return this.manager.save();\r\n  }\r\n\r\n  /**\r\n   * Get data about the group that can be saved in storage.\r\n   */\r\n  get data () : GroupSaveData {\r\n    return {\r\n      id: this.id,\r\n      name: this.name,\r\n      permissions: this.permissions.data,\r\n      players: Array.from(this.players).map(player => player.name),\r\n      managed: this.managed\r\n    };\r\n  }\r\n}","import { Group, GroupData, GroupResolvable, GroupSaveData } from \"./Group\";\r\nimport { GroupManagement } from \"../GroupManagement\";\r\n\r\nconst SAVE_KEY = \"groups\";\r\n\r\nexport class GroupManager {\r\n\r\n  management: GroupManagement;\r\n\r\n  private _groups: Map<number, Group>;\r\n\r\n  constructor (management : GroupManagement) {\r\n    this.management = management;\r\n    \r\n    this._groups = new Map(this.management.extension.storage.get(SAVE_KEY, []).map((groupData : GroupSaveData) => [groupData.id, new Group(groupData, this)] as [number, Group]));\r\n  }\r\n\r\n  /**\r\n   * Adds a group.\r\n   * @param groupData Data about the group to be added. \r\n   */\r\n  add (groupData : GroupData) : Group|undefined {\r\n    if (!groupData.name.includes(\" \") && !this.get(groupData.name)) {\r\n      const id = this.nextID;\r\n      const group = new Group({id, ...groupData}, this);\r\n      this._groups.set(id, group);\r\n      this.save();\r\n      return group;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Delete a group, will return if the operation was successful.\r\n   * @param groupResolvable Some identifier that can resolve to the group being deleted.\r\n   */\r\n  delete (groupResolvable : GroupResolvable) : boolean {\r\n    const group = this.resolveGroup(groupResolvable);\r\n    if (!group || group.managed) return false;\r\n    this._groups.delete(group.id);\r\n    this.save();\r\n    this.management.ui.deleteGroup(group);\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Retrieve a group.\r\n   * @param groupNameOrID Either the group's name or id.\r\n   */\r\n  get (groupNameOrID? : string|number) : Group|undefined|Map<number, Group> {\r\n    if (groupNameOrID) {\r\n      if (typeof groupNameOrID === \"string\") {\r\n        for (const [, group] of this._groups) {\r\n          if (group.name === groupNameOrID) {\r\n            return group;\r\n          }\r\n        }\r\n      } else {\r\n        return this._groups.get(groupNameOrID);\r\n      }\r\n    } else {\r\n      return this._groups;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Rename a group to another name. Will return if the operation was successful.\r\n   * @param groupResolvable Some identifier that can resolve to become the group to be renamed.\r\n   * @param newName New name of the group.\r\n   */\r\n  rename (groupResolvable : GroupResolvable, newName : string) : boolean {\r\n    const group = this.resolveGroup(groupResolvable);\r\n    if (!newName.includes(\" \") && group && !this.get(newName) && !group.managed) {\r\n      group.name = newName;\r\n      this.save();\r\n      this.management.ui.refreshGroup(group);\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Resolve a group.\r\n   * @param groupResolvable The to be resolved.\r\n   */\r\n  private resolveGroup (groupResolvable : GroupResolvable) : Group|undefined {\r\n    let group;\r\n\r\n    if (typeof groupResolvable === \"string\") {\r\n      group = this.get(groupResolvable) as Group|undefined;\r\n    } else if (typeof groupResolvable === \"number\") {\r\n      group = this._groups.get(groupResolvable) as Group|undefined;\r\n    } else {\r\n      group = groupResolvable;\r\n    }\r\n    return group;\r\n  }\r\n\r\n  /**\r\n   * Save the group data to storage.\r\n   */\r\n  save () {\r\n    let saveData : GroupSaveData[] = [];\r\n    for (const [, group] of this._groups) {\r\n      saveData.push(group.data);\r\n    }\r\n    this.management.extension.storage.set(SAVE_KEY, saveData);\r\n  }\r\n\r\n  /**\r\n   * Get the next group ID.\r\n   */\r\n  get nextID () {\r\n    let latestID = 0;\r\n    for (const [id] of this._groups) {\r\n      if (id > latestID) {\r\n        latestID = id;\r\n      }\r\n    }\r\n    return latestID + 1;\r\n  }\r\n}","import { PermissionManager } from \"./PermissionManager\";\r\nimport { Player, MessageBot } from \"@bhmb/bot\";\r\n\r\nexport type PermissionResolvable = string|Permission;\r\n\r\nexport interface PermissionIgnoring {\r\n  mod?: boolean,\r\n  admin?: boolean,\r\n  staff?: boolean,\r\n  owner?: boolean\r\n}\r\n\r\nexport interface PermissionData {\r\n  extension: string;\r\n  id: string;\r\n  name: string;\r\n  category: string;\r\n  command: string;\r\n  callback: (player: Player, args: string, bot : MessageBot, id : string) => void,\r\n  ignore?: PermissionIgnoring\r\n};\r\n\r\ninterface InternalPermissionData {\r\n  id: string;\r\n  category: string;\r\n  name: string;\r\n  command: string;\r\n  callback: (player : Player, args : string, bot : MessageBot, id : string) => void\r\n  ignore?: PermissionIgnoring;\r\n};\r\n\r\nexport class Permission {\r\n\r\n  extension: string;\r\n\r\n  id: string;\r\n\r\n  name: string;\r\n\r\n  category: string;\r\n  \r\n  callback : (player : Player, args : string, bot : MessageBot, id : string) => void;\r\n\r\n  command: string;\r\n\r\n  manager: PermissionManager;\r\n\r\n  ignore?: PermissionIgnoring;\r\n\r\n  listener?: ({player, message} : {player : Player, message : string}) => void;\r\n\r\n  constructor (manager: PermissionManager, extension : string, data: InternalPermissionData) {\r\n    const {id, name, category, ignore, callback, command} = data;\r\n    this.extension = extension;\r\n    this.id = id;\r\n    this.name = name;\r\n    this.category = category;\r\n    this.ignore = ignore;\r\n    this.callback = callback;\r\n    this.command = command;\r\n    this.manager = manager;\r\n    this.listener = ({player, message} : {player : Player, message : string}) => this.handleMessage({player, message})\r\n    manager.management.extension.world.onMessage.sub(this.listener);\r\n\r\n  }\r\n\r\n  handleMessage ({player, message} : {player: Player, message: string}) {\r\n    const [command, ...argsRaw] = message.split(\" \");\r\n    const args = argsRaw.join(\" \");\r\n    const user = this.manager.management.users.get(player);\r\n    if (this.command.toLocaleUpperCase() === command.toLocaleUpperCase().slice(1)) {\r\n\r\n      if (user.permissions.has(this.id) || user.groups.some(group => group.permissions.has(this.id))) {\r\n        if (this.ignore) {\r\n          if (!(this.ignore.staff && player.isStaff) && !(this.ignore.admin && player.isAdmin) && !(this.ignore.mod && player.isMod) && !(this.ignore.owner && player.isOwner)) {\r\n            this.callback(player, args, this.manager.management.extension.bot, this.id);\r\n          }\r\n        } else {\r\n          this.callback(player, args, this.manager.management.extension.bot, this.id);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Delete this permission.\r\n   */\r\n  delete () : boolean {\r\n    return this.manager.delete(this);\r\n  }\r\n};","import { GroupManagement } from \"../GroupManagement\";\r\nimport { Permission, PermissionData, PermissionResolvable } from \"./Permission\";\r\nimport { Player } from \"@bhmb/bot\";\r\n\r\nexport class PermissionManager {\r\n\r\n  management: GroupManagement;\r\n\r\n  private _permissions: Map<string, Permission>;\r\n\r\n  constructor (management : GroupManagement) {\r\n    this.management = management;\r\n    this._permissions = new Map();\r\n  }\r\n\r\n  /**\r\n   * Add a permission, will return if the operation was successful.\r\n   */\r\n  add (permissionData : PermissionData) : boolean {\r\n    if (!this.get(permissionData.id)) {\r\n      this._permissions.set(permissionData.id, new Permission(this, permissionData.extension, {\r\n        id: permissionData.id,\r\n        name: permissionData.name,\r\n        category: permissionData.category,\r\n        ignore: permissionData.ignore,\r\n        command: permissionData.command,\r\n        callback: permissionData.callback\r\n      }));\r\n      this.management.ui.addPermission(this._permissions.get(permissionData.id) as Permission);\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Delete a permission, will return in the operation was successful.\r\n   */\r\n  delete (permissionResolvable : PermissionResolvable) : boolean {\r\n    const id = this.resolvePermissionID(permissionResolvable);\r\n    const permission = this._permissions.get(id) as Permission;\r\n    const deleted = this._permissions.delete(id);\r\n    if (deleted) {\r\n      this.management.extension.world.onMessage.unsub(permission.listener as ({player, message} : {player: Player, message: string}) => void);\r\n    }\r\n    return deleted;\r\n  }\r\n\r\n  /**\r\n   * Get all permissions that belong to an extension.\r\n   * @param extension Extension\r\n   */\r\n  getExtensionPermissions (extension : string) : Permission[] {\r\n    const extensionPermissions = [];\r\n    const e = extension.toLocaleLowerCase();\r\n    for (const [, permission] of this._permissions) {\r\n      if (permission.extension.toLocaleLowerCase() === e) {\r\n        extensionPermissions.push(permission);\r\n      }\r\n    }\r\n    return extensionPermissions;\r\n  }\r\n\r\n  /**\r\n   * Get a permission.\r\n   */\r\n  get (permissionResolvable : PermissionResolvable) : Permission|undefined {\r\n    const id = this.resolvePermissionID(permissionResolvable);\r\n    return this._permissions.get(id);\r\n  }\r\n\r\n  uninstall () {\r\n    for (const [, permission] of this._permissions) {\r\n      this.delete(permission);\r\n    }\r\n  }\r\n\r\n  private resolvePermissionID (permissionResolvable : PermissionResolvable) : string {\r\n    return typeof permissionResolvable === \"string\" ? permissionResolvable : permissionResolvable.id;\r\n  }\r\n};","import { Player } from \"@bhmb/bot\";\r\nimport { UserManager } from \"./UserManager\";\r\nimport { Permissions, PermissionsSaveData } from \"../Permissions/Permissions\";\r\nimport { Group } from \"../Groups/Group\";\r\n\r\nexport type PlayerResolvable = User|Player|string;\r\n\r\nexport interface UserData {\r\n  player: Player|string;\r\n  permissions?: PermissionsSaveData;\r\n}\r\n\r\nexport interface UserSaveData {\r\n  player: string;\r\n  permissions: PermissionsSaveData;\r\n}\r\n\r\nexport class User {\r\n\r\n  manager: UserManager;\r\n\r\n  player: Player;\r\n\r\n  permissions: Permissions;\r\n\r\n  type: \"User\";\r\n\r\n  constructor (userData : UserData, manager : UserManager) {\r\n    this.manager = manager;\r\n    if (typeof userData.player === \"string\") {\r\n      this.player = this.manager.management.extension.world.getPlayer(userData.player);\r\n    } else {\r\n      this.player = userData.player;\r\n    }\r\n\r\n    this.permissions = new Permissions(this, userData.permissions);\r\n    this.type = \"User\";\r\n  }\r\n\r\n  /**\r\n   * Delete this user's permissions.\r\n   */\r\n  delete () : boolean {\r\n    return this.manager.delete(this);\r\n  }\r\n\r\n  /**\r\n   * Save\r\n   */\r\n  save () {\r\n    return this.manager.save();\r\n  }\r\n\r\n  get groups () {\r\n    const groups = Array.from((this.manager.management.groups.get() as Map<number, Group>).values()).filter(group => Array.from(group.players).some(player => player.name === this.name));\r\n    \r\n    if (this.player.isAdmin) {\r\n      groups.push(this.manager.management.groups.get(\"Administrator\") as Group);\r\n    }\r\n    if (this.player.isMod) {\r\n      groups.push(this.manager.management.groups.get(\"Moderator\") as Group);\r\n    }\r\n    groups.push(this.manager.management.groups.get(\"Anyone\") as Group);\r\n    \r\n    return groups;\r\n  }\r\n\r\n  /**\r\n   * Get the name of the user.\r\n   */\r\n  get name () {\r\n    return this.player.name;\r\n  }\r\n\r\n  /**\r\n   * Get a JSON object that can be saved to storage\r\n   */\r\n  get data () : UserSaveData {\r\n    return {\r\n      player: this.name,\r\n      permissions: this.permissions.data\r\n    };\r\n  }\r\n};","import { GroupManagement } from \"../GroupManagement\";\r\nimport { PlayerResolvable, User, UserSaveData } from \"./User\";\r\n\r\nconst SAVE_KEY = \"users\";\r\n\r\nexport class UserManager {\r\n  management: GroupManagement;\r\n\r\n  private _users: Map<string, User>;\r\n\r\n  constructor (management : GroupManagement) {\r\n    this.management = management;\r\n    this._users = new Map(this.management.extension.storage.get(SAVE_KEY, []).map((data : UserSaveData) => [data.player, new User(data, this)] as [string, User]));\r\n  }\r\n\r\n  get (playerResolvable : PlayerResolvable) {\r\n    const player = this.resolvePlayer(playerResolvable);\r\n    let user = this._users.get(player.name);\r\n    if (!user) {\r\n      //Create user.\r\n      user = new User({\r\n        player\r\n      }, this);\r\n      this._users.set(player.name, user);\r\n    }\r\n    return user;\r\n  }\r\n\r\n  delete (playerResolvable : PlayerResolvable) : boolean {\r\n    const user = this.resolvePlayer(playerResolvable);\r\n    if (!user) return false;\r\n    const deleted = this._users.delete(user.name);\r\n    //TODO: Remove from UI.\r\n    this.save();\r\n    return deleted;\r\n  }\r\n\r\n  save () {\r\n    let saveData : UserSaveData[] = [];\r\n    for (const [, user] of this._users) {\r\n      saveData.push(user.data);\r\n    }\r\n    this.management.extension.storage.set(SAVE_KEY, saveData);\r\n  }\r\n\r\n  private resolvePlayer (playerResolvable : PlayerResolvable) {\r\n    return this.management.extension.world.getPlayer(typeof playerResolvable === \"string\" ? playerResolvable : playerResolvable.name);\r\n  }\r\n\r\n}","import { UIExtensionExports } from \"@bhmb/ui\";\r\nimport { GroupManagement } from \"../GroupManagement\";\r\nimport { Group } from \"../Groups/Group\";\r\nimport { MessageBot } from \"@bhmb/bot\";\r\nimport { Permission } from \"../Permissions/Permission\";\r\nimport groupTabHTML from \"./Groups/Tab.html\";\r\nimport permissionHTML from \"./Groups/Permission.html\";\r\n\r\nclass UI {\r\n\r\n  private _ui : UIExtensionExports;\r\n\r\n  management : GroupManagement;\r\n\r\n  namespace : string;\r\n\r\n  constructor (management : GroupManagement) {\r\n    this._ui = management.extension.bot.getExports(\"ui\") as UIExtensionExports;\r\n    this.management = management;\r\n    this.namespace = \"dapersonmgn/groupManagement/tab\";\r\n    if (this._ui) {\r\n      this._ui.addTabGroup(\"Group Management\", this.namespace);\r\n    }\r\n  }\r\n\r\n  uninstall () {\r\n    if (this._ui) {\r\n      this._ui.removeTabGroup(this.namespace);\r\n    }\r\n  }\r\n\r\n  addPermission (permission : Permission) {\r\n    if (this._ui) {\r\n      const [parentCategory, subCategory] = permission.category.split(\"/\");\r\n      const groups = this.management.groups.get() as Map<number, Group>;\r\n      for (const [, group] of groups) {\r\n        const tab = group.tab as HTMLDivElement;\r\n        if (!tab.querySelector(`p[data-category=\"${parentCategory}\"]`)) {\r\n          //Parent category does not exist, we need to create it.\r\n          (tab.querySelector(\".menu\") as HTMLElement).innerHTML += `<p class=\"menu-label is-unselectable\" data-category=\"${parentCategory}\">${parentCategory}</p><ul class=\"menu-list\" data-category=\"${parentCategory}\"></ul>`;\r\n        }\r\n        if (!tab.querySelector(`ul[data-category=\"${parentCategory}\"] > li > a[data-subcategory=\"${subCategory}\"]`)) {\r\n            //Subcategory doesn't exist, create it.\r\n            const listEl = tab.querySelector(`ul[data-category=\"${parentCategory}\"]`) as HTMLUListElement;\r\n            listEl.innerHTML += `<li><a href=\"#\" class=\"is-unselectable\" data-subcategory=\"${subCategory}\">${subCategory}</a></li>`;\r\n            (listEl.querySelector(`a[data-subcategory=\"${subCategory}\"]`) as HTMLLinkElement).addEventListener(\"click\",  event => this.subcategoryListener(event, group));\r\n            (tab.querySelectorAll(\".box\")[1] as HTMLDivElement).innerHTML += `<div data-subcategory=\"${subCategory}\" data-category=\"${parentCategory}\" class=\"is-invisible\" style=\"display: none;\"><div class=\"columns\" style=\"padding-top: 2.5%;\"><div class=\"column\"></div><div class=\"column\"></div><div class=\"column\"></div></div></div>`;\r\n        }\r\n        //Add the permission to it's tab.\r\n        \r\n        const columns = Array.from(tab.querySelectorAll(`div[data-subcategory=\"${subCategory}\"][data-category=\"${parentCategory}\"] .column`)) as HTMLDivElement[];\r\n        const col = columns.sort((colA, colB) => colA.querySelectorAll(\"input[data-permission]\").length - colB.querySelectorAll(\"input[data-permission]\").length)[0];\r\n        col.innerHTML += permissionHTML\r\n          .replace(\"{ID}\", permission.id)\r\n          .replace(\"{PERMISSION}\", permission.name)\r\n          .replace(\"{ALLOWED}\", group.permissions.has(permission) ? \"checked \" : \"\")\r\n          .replace(\"{DISABLED}\", group.permissions.disabled.has(permission.id) ? \"disabled\" : \"\");\r\n  \r\n        (tab.querySelector(`a[data-subcategory=\"${subCategory}\"]`) as HTMLLinkElement).click();\r\n    }\r\n    }\r\n  }\r\n\r\n  addGroup (group : Group) : HTMLDivElement | undefined {\r\n    let tab : HTMLDivElement | undefined;\r\n    if (this._ui) {\r\n      tab = this._ui.addTab(group.name, this.namespace);\r\n      tab.innerHTML = groupTabHTML;\r\n      (tab.querySelector(\".title\") as HTMLSpanElement).innerText = group.name;\r\n      if (group.managed) {\r\n        tab.querySelectorAll(\".subtitle\")[0].innerHTML = \"\";\r\n      }\r\n\r\n      const permissions = MessageBot.extensions.map(extension => group.manager.management.permissions.getExtensionPermissions(extension)).reduce((pSetA, pSetB) => pSetA.concat(pSetB));\r\n\r\n      const categories : {\r\n        [category : string] : {\r\n          [subcategory : string] : Permission[]\r\n        }\r\n      } = {};\r\n      for (const permission of permissions) {\r\n        const [parentCategory, subCategory] = permission.category.split(\"/\");\r\n        if (!categories[parentCategory]) {\r\n          categories[parentCategory] = {};\r\n        }\r\n        if (!categories[parentCategory][subCategory]) {\r\n          categories[parentCategory][subCategory] = [];\r\n        }\r\n        categories[parentCategory][subCategory].push(permission);\r\n      }\r\n\r\n      let categoryHTML = \"\";\r\n      let firstSubCategorySelected = false;\r\n      let isSelected = false;\r\n      for (const parentCategory in categories) {\r\n        categoryHTML += `<p class=\"menu-label is-unselectable\" data-category=\"${parentCategory}\">${parentCategory}</p><ul class=\"menu-list\" data-category=\"${parentCategory}\">`;\r\n        for (const subCategory in categories[parentCategory]) {\r\n          if (firstSubCategorySelected) {\r\n            //Normal.\r\n            isSelected = false;\r\n            categoryHTML += `<li><a href=\"#\" class=\"is-unselectable\" data-subcategory=\"${subCategory}\">${subCategory}</a></li>`;\r\n          } else {\r\n            //Selected.\r\n            isSelected = true;\r\n            firstSubCategorySelected = true;\r\n            categoryHTML += `<li><a href=\"#\" class=\"is-unselectable\" style=\"background: #182b73; color: #ffffff;\" data-subcategory=\"${subCategory}\" data-selected>${subCategory}</a></li>`; \r\n          }\r\n          const columns : string[][] = [[], [], []];\r\n          let colNum = 0;\r\n          for (const permission of permissions) {\r\n            if (permission.category === `${parentCategory}/${subCategory}`) {\r\n              if (columns.length === colNum) {\r\n                colNum = 0;\r\n              }\r\n              columns[colNum].push(\r\n                permissionHTML\r\n                  .replace(\"{ID}\", permission.id)\r\n                  .replace(\"{PERMISSION}\", permission.name)\r\n                  .replace(\"{ALLOWED}\", group.permissions.has(permission) ? \"checked \" : \"\")\r\n                  .replace(\"{DISABLED}\", group.permissions.disabled.has(permission.id) ? \"disabled\" : \"\")\r\n              );\r\n              colNum++;\r\n            }\r\n          }\r\n          let subCategoryTab = `<div data-subcategory=\"${subCategory}\" data-category=\"${parentCategory}\" ${isSelected ? \"\" : 'class=\"is-invisible\" style=\"display: none;\"'}><div class=\"columns\" style=\"padding-top: 2.5%;\"><div class=\"column\">${columns[0].join(\"\")}</div><div class=\"column\">${columns[1].join(\"\")}</div><div class=\"column\">${columns[2].join(\"\")}</div></div></div>`;\r\n          (tab.querySelectorAll(\".box\")[1] as HTMLElement).innerHTML += subCategoryTab;\r\n        }\r\n        categoryHTML += `</ul>`;\r\n      }\r\n      (tab.querySelector(\".menu\") as HTMLElement).innerHTML = categoryHTML;\r\n      tab.addEventListener(\"change\", event => this.changePermissionListener(event, group));\r\n      tab.addEventListener(\"click\", event => this.clickListener(event, group));\r\n\r\n    }\r\n\r\n    // TODO: Select this tab.\r\n    return tab;\r\n  }\r\n\r\n  deleteGroup (group : Group) {\r\n    if (group.tab) {\r\n      this._ui.removeTab(group.tab);\r\n    }\r\n  }\r\n\r\n  refreshGroup (group : Group) {\r\n    if (group.tab) {\r\n      this.deleteGroup(group);\r\n      group.tab = this.addGroup(group);\r\n    }\r\n  }\r\n\r\n  changePermissionListener (event : Event, group : Group) {\r\n    const target = event.target as HTMLInputElement;\r\n    const permission = target.getAttribute(\"data-permission\") as string;\r\n    if (target.checked) {\r\n      group.permissions.add(permission);\r\n    } else {\r\n      group.permissions.delete(permission);\r\n    }\r\n  }\r\n\r\n  deleteGroupUI (group : Group) {\r\n    this._ui.alert(\"Are you sure?\", [\r\n      {\r\n        text: \"Yes\",\r\n        style: \"is-danger\"\r\n      },\r\n      {\r\n        text: \"Cancel\"\r\n      }\r\n    ], response => {\r\n      if (response === \"Yes\") {\r\n        const result = group.delete();\r\n        if (!result) {\r\n          this._ui.notify(\"Failed to delete group.\");\r\n        } else {\r\n          this._ui.toggleMenu();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  renameGroupUI (group : Group) {\r\n    this._ui.prompt(\"What would you like to rename this group to?\", newName => {\r\n      if (newName) {\r\n        const result = group.rename(newName);\r\n        if (!result) {\r\n          this._ui.notify(\"Failed to rename group.\");\r\n        } else {\r\n          this._ui.toggleMenu();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  addGroupUI () {\r\n    this._ui.prompt(\"What would you like to name this new group?\", name => {\r\n      if (name) {\r\n        const result = this.management.groups.add({\r\n          name\r\n        });\r\n        if (result) {\r\n          this._ui.toggleMenu();\r\n        } else if (name.includes(\" \")) {\r\n          this._ui.notify(\"Groups cannot have a space!\");\r\n        } else {\r\n          this._ui.notify(\"This group name already exists!\");\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  clickListener (event : MouseEvent, group : Group) {\r\n    const element = event.target as HTMLLinkElement;\r\n    if (element.tagName === \"A\") {\r\n      const action = element.getAttribute(\"data-action\");\r\n      if (action) {\r\n        switch (action) {\r\n          case \"rename\" :\r\n            this.renameGroupUI(group);\r\n          break;\r\n          case \"create\":\r\n            this.addGroupUI();\r\n          break;\r\n          case \"delete\":\r\n            this.deleteGroupUI(group);\r\n          break;\r\n        }\r\n      } else {\r\n        const subcategory = element.getAttribute(\"data-subcategory\");\r\n        if(subcategory) {\r\n          this.subcategoryListener(event, group);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  subcategoryListener (event : MouseEvent, group : Group) {\r\n    const tab = group.tab as HTMLDivElement;\r\n    const wantedSubCategory = (event.target as HTMLElement).getAttribute(\"data-subcategory\");\r\n    const parentCategory = (((event.target as HTMLElement).parentElement as HTMLElement).parentElement as HTMLElement).getAttribute(\"data-category\");\r\n    const tabToShow = tab.querySelector(`div[data-subcategory=\"${wantedSubCategory}\"][data-category=\"${parentCategory}\"]`) as HTMLDivElement;\r\n    if (tabToShow.classList.contains(\"is-invisible\")) {\r\n      const oldSelectedCategory = ((((event.target as HTMLElement).parentElement as HTMLElement).parentElement as HTMLElement).parentElement as HTMLElement).querySelector(\"a[data-selected]\") as HTMLElement;\r\n      if (oldSelectedCategory) {\r\n        oldSelectedCategory.setAttribute(\"style\", \"\");\r\n        oldSelectedCategory.removeAttribute(\"data-selected\");\r\n        const tabToHide = tab.querySelector(`div[data-subcategory=\"${oldSelectedCategory.getAttribute(\"data-subcategory\")}\"][data-category=\"${((oldSelectedCategory.parentElement as HTMLElement).parentElement as HTMLElement).getAttribute(\"data-category\")}\"]`) as HTMLDivElement;\r\n        tabToHide.classList.add(\"is-invisible\");\r\n        tabToHide.setAttribute(\"style\", \"display: none\");\r\n      }\r\n      (event.target as HTMLElement).setAttribute(\"style\", \"background: #182b73; color: #ffffff;\");\r\n      (event.target as HTMLElement).setAttribute(\"data-selected\", \"\");\r\n      tabToShow.classList.remove(\"is-invisible\");\r\n      tabToShow.setAttribute(\"style\", \"\");\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport {\r\n  UI\r\n};","import { MessageBotExtension } from \"@bhmb/bot\";\r\nimport { GroupManager } from \"./Groups/GroupManager\";\r\nimport { PermissionManager } from \"./Permissions/PermissionManager\";\r\nimport { UserManager } from \"./Users/UserManager\";\r\nimport { UI } from \"./UI\";\r\n\r\nexport class GroupManagement {\r\n\r\n  groups: GroupManager;\r\n\r\n  users: UserManager;\r\n\r\n  permissions: PermissionManager;\r\n\r\n  extension: MessageBotExtension;\r\n\r\n  ui: UI;\r\n\r\n  constructor (ex : MessageBotExtension) {\r\n    this.extension = ex;\r\n    this.ui = new UI(this);\r\n    this.permissions = new PermissionManager(this);\r\n    this.groups = new GroupManager(this);\r\n    this.users = new UserManager(this);\r\n  }\r\n\r\n  /**\r\n   * Called when the extension is to be uninstalled.\r\n   */\r\n  uninstall () {\r\n    this.permissions.uninstall();\r\n    this.ui.uninstall();\r\n  }\r\n\r\n  /**\r\n   * Save the groups and users.\r\n   */\r\n  save () {\r\n    this.groups.save();\r\n    this.users.save();\r\n  }\r\n\r\n\r\n}","import { Player, MessageBot } from \"@bhmb/bot\";\r\nimport { GroupManagement } from \"../GroupManagement\";\r\n\r\nconst EXTENSION_ID = \"dapersonmgn/groupManagement\";\r\n\r\nconst helpMessages : {\r\n  [key: string] : string\r\n} = {\r\n  \"BH.HELP\": \"/HELP - display this message.\",\r\n  \"BH.PLAYERS\": \"/PLAYERS - list currently active players.\",\r\n  \"BH.KICK\": \"/KICK player_name - kicks player_name, but they will still be allowed to reconnect.\",\r\n  \"BH.BAN\": \"/BAN player_name_or_ip - adds player_name_or_ip to the blacklist, ban's that user's device from reconnecting with a different name, and kicks anyone who is no longer authorized.\",\r\n  \"BH.BAN_NO_DEVICE\": \"/BAN-NO-DEVICE player_name_or_ip - works the same as the ban command, but doesn't ban the player's device.\",\r\n  \"BH.UNBAN\": \"/UNBAN player_name_or_ip - removes player_name_or_ip from the blacklist.\",\r\n  \"BH.WHITELIST\": \"/WHITELIST player_name_or_ip - adds player_name_or_ip to the whitelist, and kicks anyone who is no longer authorized.\",\r\n  \"BH.UNWHITELIST\": \"/UNWHITELIST player_name_or_ip - removes player_name_or_ip from the whitelist, and kicks anyone who is no longer authorized.\",\r\n  \"BH.LIST_BLACKLIST\": \"/LIST-BLACKLIST - lists the 50 most recent players on the blacklist.\",\r\n  \"BH.LIST_WHITELIST\": \"/LIST-WHITELIST - lists the 50 most recent players on the whitelist.\",\r\n  \"BH.LIST_MODLIST\": \"/LIST-MODLIST - lists the 50 most recent players on the modlist.\",\r\n  \"BH.LIST_ADMINLIST\": \"/LIST-ADMINLIST - lists the 50 most recent players on the adminlist.\",\r\n  \"BH.PVPON\": \"/PVP-ON - enables PVP (Player vs. Player) so players can directly hurt each other.\",\r\n  \"BH.PVPOFF\": \"/PVP-OFF - disables PVP (Player vs. Player) so players cannot directly hurt each other\",\r\n  \"BH.LOADLISTS\": \"/LOAD-LISTS - reloads the blacklist.txt, modlist.txt and adminlist.txt files, and kicks anyone who is no longer authorized.\",\r\n  \"BH.MOD\": \"/MOD player_name - adds player_name to the modlist, allowing them to issue some server commands via chat.\",\r\n  \"BH.UNMOD\": \"/UNMOD player_name - removes player_name from the modlist.\",\r\n  \"BH.ADMIN\": \"/ADMIN player_name - adds player_name to the adminlist, allowing them to issue server commands via chat.\",\r\n  \"BH.UNADMIN\": \"/UNADMIN player_name - removes player_name from the adminlist.\",\r\n  \"BH.CLEAR_BLACKLIST\": \"/CLEAR-BLACKLIST - removes all names from the blacklist.\",\r\n  \"BH.CLEAR_WHITELIST\": \"/CLEAR-WHITELIST - removes all names from the whitelist.\",\r\n  \"BH.CLEAR_MODLIST\": \"/CLEAR-MODLIST - removes all names from the modlist.\",\r\n  \"BH.CLEAR_ADMINLIST\": \"/CLEAR-ADMINLIST - removes all names from the adminlist.\",\r\n  \"BH.SET_PASSWORD\": \"/SET-PASSWORD password - sets a new password, which all players except the owner must use in order to connect.\",\r\n  \"BH.REMOVE_PASSWORD\": \"/REMOVE-PASSWORD - removes the password, so all players may connect.\",\r\n  \"BH.SET_PRIVACY\": \"/SET-PRIVACY public/searchable/private - changes the privacy setting.\"\r\n};\r\n\r\nexport const callback = async (player : Player, args : string, bot : MessageBot, id : string) => {\r\n  const manager = (bot.getExports(EXTENSION_ID) as {manager: GroupManagement}).manager;\r\n  const user = manager.users.get(player);\r\n  const targetPlayer = bot.world.getPlayer(args);\r\n  const overview = await bot.world.getOverview();\r\n  let lists;\r\n\r\n  switch (id) {\r\n    case \"BH.HELP\":\r\n      let helpMessage = \"\\n\";\r\n      for (const permissionID in helpMessages) {\r\n        if (user.permissions.has(permissionID) || user.groups.some(group => group.permissions.has(permissionID))) {\r\n          helpMessage += helpMessages[permissionID]+\"\\n\";\r\n        }\r\n      }\r\n      bot.world.send(helpMessage);\r\n    break;\r\n\r\n    case \"BH.PLAYERS\":\r\n      bot.world.send(overview.online.length === 0 ? \"No players currently connected.\" : `There are ${overview.online.length} players connected:\\n${overview.online.join(\"\\n\")}`);\r\n    break;\r\n\r\n    case \"BH.KICK\":\r\n      if (!targetPlayer.isStaff) {\r\n        bot.world.send(`/KICK ${targetPlayer.name}`);\r\n      }\r\n    break;\r\n    case \"BH.KICK_MOD\":\r\n      if (!targetPlayer.isAdmin && targetPlayer.isMod) {\r\n        bot.world.send(`/KICK ${targetPlayer.name}`);\r\n      }\r\n    break;\r\n    case \"BH.KICK_ADMIN\":\r\n      if (targetPlayer.isAdmin) {\r\n        bot.world.send(`/KICK ${targetPlayer.name}`);\r\n      }\r\n    break;\r\n\r\n    case \"BH.BAN\":\r\n      if (!targetPlayer.isStaff) {\r\n        bot.world.send(`/BAN ${targetPlayer.name}`);\r\n        bot.world.send(`${targetPlayer.name} has been added to the blacklist`);\r\n      }\r\n    break;\r\n    case \"BH.BAN_MOD\":\r\n      if (targetPlayer.isMod && !targetPlayer.isAdmin) {\r\n        bot.world.send(`/BAN ${targetPlayer.name}`);\r\n        bot.world.send(`${targetPlayer.name} has been added to the blacklist`);\r\n      }\r\n    break;\r\n    case \"BH.BAN_ADMIN\":\r\n    if (targetPlayer.isAdmin && !targetPlayer.isOwner) {\r\n      bot.world.send(`/BAN ${targetPlayer.name}`);\r\n      bot.world.send(`${targetPlayer.name} has been added to the blacklist`);\r\n    }\r\n    break;\r\n\r\n    case \"BH.BAN_NO_DEVICE\":\r\n      if (!targetPlayer.isStaff) {\r\n        bot.world.send(`/BAN-NO-DEVICE ${targetPlayer.name}`);\r\n        bot.world.send(`${targetPlayer.name} has been added to the blacklist`);\r\n      }\r\n    break;\r\n    case \"BH.BAN_NO_DEVICE_MOD\":\r\n      if (!targetPlayer.isAdmin && targetPlayer.isMod) {\r\n        bot.world.send(`/BAN-NO-DEVICE ${targetPlayer.name}`);\r\n        bot.world.send(`${targetPlayer.name} has been added to the blacklist`);\r\n      }\r\n    break;\r\n    case \"BH.BAN_NO_DEVICE_ADMIN\":\r\n      if (targetPlayer.isAdmin && !targetPlayer.isOwner) {\r\n        bot.world.send(`/BAN-NO-DEVICE ${targetPlayer.name}`);\r\n        bot.world.send(`${targetPlayer.name} has been added to the blacklist`);\r\n      }\r\n    break;\r\n\r\n    case \"BH.LIST_MODLIST\":\r\n    case \"BH.LIST_ADMINLIST\":\r\n    case \"BH.LIST_BLACKLIST\":\r\n    case \"BH.LIST_WHITELIST\":\r\n      lists = await bot.world.getLists(true);\r\n      const listType = id.split(\"_\")[1].toLocaleLowerCase() as \"modlist\"|\"adminlist\"|\"blacklist\"|\"whitelist\";\r\n      bot.world.send(`${listType[0].toLocaleUpperCase()}${listType.slice(1)}:\\n${lists[listType].join(\", \")}`);\r\n    break;\r\n\r\n    case \"BH.UNBAN\":\r\n      lists = await bot.world.getLists(true);\r\n      if (lists.blacklist.map(s => s.toLocaleUpperCase()).includes(targetPlayer.name.toLocaleUpperCase())) {\r\n        bot.world.send(`${targetPlayer.name} was not on the blacklist.`);\r\n      } else {\r\n        bot.world.send(`/UNBAN ${targetPlayer.name}`);\r\n        bot.world.send(`${targetPlayer.name} has been removed from the blacklist.`);\r\n      }\r\n    break;\r\n\r\n    case \"BH.WHITELIST\":\r\n      if (targetPlayer.isWhitelisted) {\r\n        bot.world.send(`${targetPlayer.name} was already on the whitelist.`);\r\n      } else {\r\n        bot.world.send(`/WHITELIST ${targetPlayer.name}`);\r\n        bot.world.send(`${targetPlayer.name} has been added to the whitelist.`);\r\n      }\r\n    break;\r\n    case \"BH.UNWHITELIST\":\r\n      if (targetPlayer.isWhitelisted) {\r\n        bot.world.send(`/UNWHITELIST ${targetPlayer.name}`);\r\n        bot.world.send(`${targetPlayer.name} has been removed from the whitelist.`);\r\n      } else {\r\n        bot.world.send(`${targetPlayer.name} was not on the whitelist.`);\r\n      }\r\n    break;\r\n\r\n    case \"BH.STOP\":\r\n      bot.world.send(\"/STOP\");\r\n    break;\r\n\r\n    case \"BH.PVPON\":\r\n      if (overview.pvp) {\r\n        bot.world.send(\"PVP was already enabled.\");\r\n      } else {\r\n        bot.world.send(\"/PVP-ON\");\r\n        bot.world.send(\"PVP is now enabled.\");\r\n      }\r\n    break;\r\n    case \"BH.PVPOFF\":\r\n      if (overview.pvp) {\r\n        bot.world.send(\"/PVP-OFF\");\r\n        bot.world.send(\"PVP is now disabled.\");\r\n      } else {\r\n        bot.world.send(\"PVP was already disabled.\");\r\n      }\r\n    break;\r\n\r\n    case \"BH.LOADLISTS\":\r\n      bot.world.send(\"/LOAD-LISTS\");\r\n      bot.world.send(\"Reloaded lists.\");\r\n    break;\r\n\r\n    case \"BH.MOD\":\r\n        if (targetPlayer.isMod) {\r\n          bot.world.send(`${targetPlayer.name} was already on the modlist`);\r\n        } else {\r\n          bot.world.send(`/MOD ${targetPlayer.name}`);\r\n          bot.world.send(`${targetPlayer.name} has been added to the modlist`);\r\n        }\r\n    break;\r\n    case \"BH.UNMOD\":\r\n      if (targetPlayer.isMod) {\r\n        bot.world.send(`/UNMOD ${targetPlayer.name}`);\r\n        bot.world.send(`${targetPlayer.name} has been removed from the modlist`);\r\n      } else {\r\n        bot.world.send(`${targetPlayer.name} was not on the modlist`);\r\n      }\r\n    break;\r\n\r\n    case \"BH.ADMIN\":\r\n      if (targetPlayer.isAdmin) {\r\n        bot.world.send(`${targetPlayer.name} was already on the adminlist`);\r\n      } else {\r\n        bot.world.send(`/ADMIN ${targetPlayer.name}`);\r\n        bot.world.send(`${targetPlayer.name} has been added to the adminlist`);\r\n      }\r\n    break;\r\n    case \"BH.UNADMIN\":\r\n      if (targetPlayer.isAdmin) {\r\n        bot.world.send(`/UNADMIN ${targetPlayer.name}`);\r\n        bot.world.send(`${targetPlayer.name} has been removed from the adminlist`);\r\n      } else {\r\n        bot.world.send(`${targetPlayer.name} was not on the adminlist`);\r\n      }\r\n    break;\r\n\r\n    case \"BH.CLEAR_WHITELIST\":\r\n      bot.world.send(\"/CLEAR-WHITELIST\");\r\n      bot.world.send(\"Whitelist cleared.\");\r\n    break;\r\n    case \"BH.CLEAR_ADMINLIST\":\r\n      bot.world.send(\"/CLEAR-ADMINLIST\");\r\n      bot.world.send(\"Adminlist cleared.\");\r\n    break;\r\n    case \"BH.CLEAR_MODLIST\":\r\n      bot.world.send(\"/CLEAR-MODLIST\");\r\n      bot.world.send(\"Modlist cleared.\");\r\n    break;\r\n    case \"BH.CLEAR_BLACKLIST\":\r\n      bot.world.send(\"/CLEAR-BLACKLIST\");\r\n      bot.world.send(\"Blacklist cleared.\");\r\n    break;\r\n    \r\n    case \"BH.SET_PRIVACY\":\r\n      const privacy = args.toLocaleLowerCase();\r\n      if ([\"public\", \"searchable\", \"private\"].includes(privacy)) {\r\n        bot.world.send(`/SET-PRIVACY ${privacy}`);\r\n        bot.world.send(`Privacy setting has changed to ${privacy}.`);\r\n      }\r\n    break;\r\n\r\n    case \"BH.SET_PASSWORD\":\r\n      bot.world.send(`/SET-PASSWORD ${args}`);\r\n      bot.world.send(\"Password set.\");\r\n    break;\r\n    case \"BH.REMOVE_PASSWORD\":\r\n      if (overview.password) {\r\n        bot.world.send(`/REMOVE-PASSWORD ${args}`);\r\n        bot.world.send(\"Removed password.\");\r\n      } else {\r\n        bot.world.send(\"There was already no password set.\");\r\n      }\r\n    break;\r\n    \r\n\r\n  }\r\n\r\n\r\n};","import { callback } from \"./BlockheadsHandler\";\r\nimport { ExtensionPermission } from \"..\";\r\n\r\ninterface BlockheadExtensionPermission extends ExtensionPermission {\r\n  display: {\r\n    category: \"Blockheads/Moderator Commands\"|\"Blockheads/Administrator Commands\"|\"Blockheads/List Commands\"|\"Blockheads/World Commands\",\r\n    name: string\r\n  }\r\n}\r\n\r\nexport const BlockheadPermissions : BlockheadExtensionPermission[] =  [\r\n  {\r\n    callback,\r\n    id: \"BH.HELP\",\r\n    command: \"HELP\",\r\n    ignore: {\r\n      staff: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/Moderator Commands\",\r\n      name: \"View the /help message\"\r\n    },\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.PLAYERS\",\r\n    command: \"PLAYERS\",\r\n    ignore: {\r\n      staff: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/Moderator Commands\",\r\n      name: \"View the /players message\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.KICK\",\r\n    command: \"KICK\",\r\n    ignore: {\r\n      staff: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/Moderator Commands\",\r\n      name: \"Kick any normal player\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.KICK_MOD\",\r\n    command: \"KICK\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/Administrator Commands\",\r\n      name: \"Kick any moderator\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.KICK_ADMIN\",\r\n    command: \"KICK\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/Administrator Commands\",\r\n      name: \"Kick any administrator\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.BAN\",\r\n    command: \"BAN\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/Moderator Commands\",\r\n      name: \"Ban any normal player\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.BAN_MOD\",\r\n    command: \"BAN\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/Administrator Commands\",\r\n      name: \"Ban any moderator\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.BAN_ADMIN\",\r\n    command: \"BAN\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/Administrator Commands\",\r\n      name: \"Ban any administrator\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.BAN_NO_DEVICE\",\r\n    command: \"BAN-NO-DEVICE\",\r\n    ignore: {\r\n      staff: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/Moderator Commands\",\r\n      name: \"Ban any normal player using /ban-no-device\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.BAN_NO_DEVICE_MOD\",\r\n    command: \"BAN-NO-DEVICE\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/Administrator Commands\",\r\n      name: \"Ban any moderator using /ban-no-device\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.BAN_NO_DEVICE_ADMIN\",\r\n    command: \"BAN-NO-DEVICE\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/Administrator Commands\",\r\n      name: \"Ban any administrator using /ban-no-device\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.UNBAN\",\r\n    command: \"UNBAN\",\r\n    ignore: {\r\n      staff: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/Moderator Commands\",\r\n      name: \"Unban any player\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.WHITELIST\",\r\n    command: \"WHITELIST\",\r\n    ignore: {\r\n      staff: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/List Commands\",\r\n      name: \"Whitelist any player\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.UNWHITELIST\",\r\n    command: \"UNWHITELIST\",\r\n    ignore: {\r\n      staff: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/List Commands\",\r\n      name: \"Unwhitelist any player\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.LIST_BLACKLIST\",\r\n    command: \"LIST-BLACKLIST\",\r\n    ignore: {\r\n      staff: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/List Commands\",\r\n      name: \"List the blacklist\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.LIST_WHITELIST\",\r\n    command: \"LIST-WHITELIST\",\r\n    ignore: {\r\n      staff: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/List Commands\",\r\n      name: \"List the whitelist\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.LIST_ADMINLIST\",\r\n    command: \"LIST-ADMINLIST\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/List Commands\",\r\n      name: \"List the adminlist\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.LIST_MODLIST\",\r\n    command: \"LIST-MODLIST\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/List Commands\",\r\n      name: \"List the modlist\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.STOP\",\r\n    command: \"STOP\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/Administrator Commands\",\r\n      name: \"Stop the server\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.PVPON\",\r\n    command: \"PVP-ON\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/World Commands\",\r\n      name: \"Turn PVP on\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.PVPOFF\",\r\n    command: \"PVP-OFF\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/World Commands\",\r\n      name: \"Turn PVP off\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.LOADLISTS\",\r\n    command: \"LOAD-LISTS\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/List Commands\",\r\n      name: \"Reload the lists\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.MOD\",\r\n    command: \"MOD\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/Administrator Commands\",\r\n      name: \"Add others to the modlist\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.UNMOD\",\r\n    command: \"UNMOD\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/Administrator Commands\",\r\n      name: \"Remove others from the modlist\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.ADMIN\",\r\n    command: \"ADMIN\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/Administrator Commands\",\r\n      name: \"Add others to the adminlist\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.UNADMIN\",\r\n    command: \"UNADMIN\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/Administrator Commands\",\r\n      name: \"Remove others from the adminlist\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.CLEAR_BLACKLIST\",\r\n    command: \"CLEAR-BLACKLIST\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/List Commands\",\r\n      name: \"Clear the blacklist\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.CLEAR_WHITELIST\",\r\n    command: \"CLEAR-WHITELIST\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/List Commands\",\r\n      name: \"Clear the whitelist\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.CLEAR_MODLIST\",\r\n    command: \"CLEAR-MODLIST\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/List Commands\",\r\n      name: \"Clear the modlist\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.CLEAR_ADMINLIST\",\r\n    command: \"CLEAR-ADMINLIST\",\r\n    ignore: {\r\n      admin: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/List Commands\",\r\n      name: \"Clear the adminlist\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.SET_PASSWORD\",\r\n    command: \"SET-PASSWORD\",\r\n    ignore: {\r\n      owner: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/World Commands\",\r\n      name: \"Set the world's password.\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.SET_PRIVACY\",\r\n    command: \"SET-PRIVACY\",\r\n    ignore: {\r\n      owner: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/World Commands\",\r\n      name: \"Set the privacy of the world\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"BH.REMOVE_PASSWORD\",\r\n    command: \"REMOVE-PASSWORD\",\r\n    ignore: {\r\n      owner: true\r\n    },\r\n    display: {\r\n      category: \"Blockheads/World Commands\",\r\n      name: \"Remove the world's password\"\r\n    }\r\n  }\r\n];","import { Player, MessageBot } from \"@bhmb/bot\";\r\nimport { GroupManagement } from \"../GroupManagement\";\r\nimport { Permission } from \"../Permissions/Permission\";\r\nimport { Group } from \"../Groups/Group\";\r\n\r\nconst EXTENSION_ID = \"dapersonmgn/groupManagement\";\r\n\r\nconst helpMessages : {\r\n  [key: string] : string\r\n} = {\r\n  \"GM.HELP\": \"/GM-HELP - displays this message\",\r\n  \"GM.CHECK\": \"/GM-CHECK command_name player_name - checks whether or not the player has a permission.\",\r\n  \"GM.USER\": \"/GM-USER player_name - displays all the permissions a user has, along with what groups the user is in\",\r\n  \"GM.GROUP\": \"/GM-GROUP group_name - display information about a group\",\r\n  \"GM.ADD\": \"/GM-ADD group_name player_name - adds a user to a group\",\r\n  \"GM.REMOVE\": \"/GM-REMOVE group_name player_name - removes a user from a group\",\r\n  \"GM.GSET\": \"/GM-GSET command_name value group_name - sets a group's permission to a value\",\r\n  \"GM.USET\": \"/GM-USET command_name value player_name - sets a user's permission to a value\",\r\n  \"GM.CREATE\": \"/GM-CREATE group_name - creates a group\",\r\n  \"GM.DESTORY\": \"/GM-DESTROY group_name - destroys a group\",\r\n  \"GM.LIST\": \"/GM-LIST group_name - view the last 50 players added to a group\"\r\n};\r\n\r\nexport const callback = (player : Player, args : string, bot : MessageBot, id : string) => {\r\n  const manager = (bot.getExports(EXTENSION_ID) as {manager: GroupManagement}).manager;\r\n  const argsArr = args.split(\" \");\r\n  const user = manager.users.get(player);\r\n  \r\n  switch (id) {\r\n    case \"GM.HELP\":\r\n      let helpMessage = \"\\n\";\r\n      for (const permissionID in helpMessages) {\r\n        if (user.permissions.has(permissionID) || user.groups.some(group => group.permissions.has(permissionID))) {\r\n          helpMessage += helpMessages[permissionID]+\"\\n\";\r\n        }\r\n      }\r\n      bot.world.send(helpMessage);\r\n    break;\r\n    \r\n    case \"GM.CHECK\":\r\n      if (argsArr.length < 2) {\r\n        bot.world.send(`You didn't specify enough arguments.\\nExample: /GM-CHECK KICK PLAYER_NAME\\nThis would check if PLAYER_NAME has permission to use the KICK command.`);\r\n      } else {\r\n        const [command, ...userArgs] = argsArr;\r\n        const permissions = MessageBot.extensions.map(extension => manager.permissions.getExtensionPermissions(extension)).reduce((pSetA, pSetB) => pSetA.concat(pSetB));\r\n        const commandPermissions = permissions.filter(permission => permission.command.toLocaleUpperCase() === command.toLocaleUpperCase() || (permission.command.toLocaleUpperCase() === command.slice(1).toLocaleUpperCase() && command.startsWith(\"/\")));\r\n        const targetUser = manager.users.get(userArgs.join(\" \"));\r\n        if (commandPermissions.some(permission => targetUser.permissions.has(permission) || Array.from(targetUser.groups).some(group => group.permissions.has(permission)))) {\r\n          bot.world.send(`\\n${targetUser.name} has the ability to use the command ${command.toLocaleUpperCase()}`);\r\n        } else {\r\n          bot.world.send(`\\n${targetUser.name} cannot use the command ${command.toLocaleUpperCase()}`);\r\n        }\r\n      }\r\n    break;\r\n\r\n    case \"GM.USER\":\r\n      if (argsArr.length < 1) {\r\n        bot.world.send(\"You didn't specify enough arguments.\\nExample: /GM-USER PLAYER_NAME\\nThis would display information about a user.\");\r\n      } else {\r\n        const targetUser = manager.users.get(args);\r\n        bot.world.send(`\\n${targetUser.name}\\nHas user specific permissions to use:\\n${Array.from(targetUser.permissions.allowed).map(id => `/${(manager.permissions.get(id) as Permission).command}`).join(\"\\n\")}\\nIs in the groups:\\n${targetUser.groups.map(group => group.name).join(\"\\n\")}`);\r\n      }\r\n    break;\r\n\r\n    case \"GM.GROUP\":\r\n      if (argsArr.length < 1) {\r\n        bot.world.send(\"You didn't specify enough arguments.\\nExample: /GM-GROUP Anyone\\nThis would display information about the Anyone group.\")\r\n      } else {\r\n        const group = manager.groups.get(args) as Group;\r\n        if (!group) {\r\n          bot.world.send(\"This group does not exist! Group names are CaSe SeNsItIvE!\");\r\n        } else {\r\n          bot.world.send(`\\n${group.name}:\\nPlayers: ${group.players.size}\\nThis group can use the commands:\\n${Array.from(group.permissions.allowed).map(id => `${(manager.permissions.get(id) as Permission).command}`).join(\", \")}`);\r\n        }\r\n      }\r\n    break;\r\n\r\n    case \"GM.ADD\":\r\n      if (argsArr.length < 2) {\r\n        bot.world.send(\"You didn't specify enough arguments.\\nExample: /GM-ADD GROUP_NAME PLAYER_NAME\\nThis would add PLAYER_NAME to GROUP_NAME\");\r\n      } else {\r\n        const [groupName, ...playerNameArr] = argsArr;\r\n        const group = manager.groups.get(groupName) as Group;\r\n        if (!group) {\r\n          bot.world.send(\"This group does not exist! Group names are CaSe SeNsItIvE!\");\r\n        } else {\r\n          const hasMorePermissions = Array.from(group.permissions.allowed).filter(id => user.permissions.has(id) || user.groups.some(group => group.permissions.has(id))).length > 0;\r\n          if (hasMorePermissions && !player.isOwner) {\r\n            bot.world.send(\"This group has more permissions than you do! You cannot give this group to others!\");\r\n          } else if (group.managed) {\r\n            bot.world.send(`You cannot give other players the ${group.name} group! It is managed internally by the extension!`);\r\n          } else {\r\n            const playerName = playerNameArr.join(\" \");\r\n            if (group.addPlayer(playerName)) {\r\n              bot.world.send(`Added ${playerName.toLocaleUpperCase()} to ${group.name}.`)\r\n            } else {\r\n              bot.world.send(`\\n${playerName.toLocaleUpperCase()} is already in ${group.name}!`);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    break;\r\n\r\n    case \"GM.REMOVE\":\r\n      if (argsArr.length < 2) {\r\n        bot.world.send(\"You didn't specify enough arguments.\\nExample: /GM-REMOVE GROUP_NAME PLAYER_NAME\\nThis would remove PLAYER_NAME from GROUP_NAME\");\r\n      } else {\r\n        const [groupName, ...playerNameArr] = argsArr;\r\n        const group = manager.groups.get(groupName) as Group;\r\n        if (!group) {\r\n          bot.world.send(\"This group does not exist! Group names are CaSe SeNsItIvE!\");\r\n        } else {\r\n          const hasMorePermissions = Array.from(group.permissions.allowed).filter(id => user.permissions.has(id) || user.groups.some(group => group.permissions.has(id))).length > 0;\r\n          if (hasMorePermissions && !player.isOwner) {\r\n            bot.world.send(\"This group has more permissions than you do! You cannot remove this group from others!\");\r\n          } else if (group.managed) {\r\n            bot.world.send(`You cannot remove ${group.name} from other players! It is managed internally by the extension!`);\r\n          } else {\r\n            const playerName = playerNameArr.join(\" \");\r\n            if (group.removePlayer(playerName)) {\r\n              bot.world.send(`Removed ${playerName.toLocaleUpperCase()} from ${group.name}.`)\r\n            } else {\r\n              bot.world.send(`\\n${playerName.toLocaleUpperCase()} was already not in ${group.name}!`);\r\n            }\r\n          }\r\n        } \r\n      }\r\n    break;\r\n\r\n    case \"GM.GSET\":\r\n      if (argsArr.length < 3) {\r\n        bot.world.send(\"You didn't specify enough arguments.\\nExample: /GM-GSET COMMAND_NAME 1 GROUP_NAME\\nThis would set any permission that can be activated by /COMMAND_NAME to true of the group GROUP_NAME. Alternatively if you wish to disable a permission already true, replace 1 with 0.\");\r\n      } else {\r\n        const [command, value, ...groupNameArr] = argsArr;\r\n        const groupName = groupNameArr.join(\" \");\r\n        const group = manager.groups.get(groupName) as Group;\r\n        if (!group) {\r\n          bot.world.send(\"This group does not exist! Group names are CaSe SeNsItIvE!\");\r\n        } else {\r\n          if (![\"1\", \"0\"].includes(value)) {\r\n            bot.world.send(\"The value MUST be either 1 or 0.\");\r\n          } else {\r\n            const permissions = MessageBot.extensions.map(extension => manager.permissions.getExtensionPermissions(extension)).reduce((pSetA, pSetB) => pSetA.concat(pSetB));\r\n            const commandPermissions = permissions.filter(permission => permission.command.toLocaleUpperCase() === command.toLocaleUpperCase() || (permission.command.toLocaleUpperCase() === command.slice(1).toLocaleUpperCase() && command.startsWith(\"/\")));\r\n            if (commandPermissions.length === 0) {\r\n              bot.world.send(`There is no registered command by the name of ${command.startsWith(\"/\") ? command.toLocaleUpperCase() : `/${command.toLocaleUpperCase()}`}`);\r\n            } else {\r\n              if (value === \"1\") {\r\n                group.permissions.add(commandPermissions[0]);\r\n                bot.world.send(`\\n${command.startsWith(\"/\") ? command.toLocaleUpperCase() : `/${command.toLocaleUpperCase()}`} is now enabled for the group ${group.name}.`);\r\n              } else {\r\n                group.permissions.delete(commandPermissions[0]);\r\n                bot.world.send(`\\n${command.startsWith(\"/\") ? command.toLocaleUpperCase() : `/${command.toLocaleUpperCase()}`} is now disabled for the group ${group.name}.`);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    break;\r\n\r\n    case \"GM.USET\":\r\n      if (argsArr.length < 3) {\r\n        bot.world.send(\"You didn't specify enough arguments.\\nExample: /GM-USET COMMAND_NAME 1 PLAYER_NAME\\nThis would set any permission that can be activated by /COMMAND_NAME to true of the user PLAYER_NAME. Alternatively if you wish to disable a permission already true, replace 1 with 0.\");\r\n      } else {\r\n        const [command, value, ...playerNameArr] = argsArr;\r\n        const userName = playerNameArr.join(\" \");\r\n        const user = manager.users.get(userName);\r\n        if (![\"1\", \"0\"].includes(value)) {\r\n          bot.world.send(\"The value MUST be either 1 or 0.\");\r\n        } else {\r\n          const permissions = MessageBot.extensions.map(extension => manager.permissions.getExtensionPermissions(extension)).reduce((pSetA, pSetB) => pSetA.concat(pSetB));\r\n          const commandPermissions = permissions.filter(permission => permission.command.toLocaleUpperCase() === command.toLocaleUpperCase() || (permission.command.toLocaleUpperCase() === command.slice(1).toLocaleUpperCase() && command.startsWith(\"/\")));\r\n          if (value === \"1\") {\r\n            user.permissions.add(commandPermissions[0]);\r\n            bot.world.send(`\\n${command.startsWith(\"/\") ? command.toLocaleUpperCase() : `/${command.toLocaleUpperCase()}`} is now enabled for the user ${user.name}.`);\r\n          } else {\r\n            user.permissions.delete(commandPermissions[0]);\r\n            bot.world.send(`\\n${command.startsWith(\"/\") ? command.toLocaleUpperCase() : `/${command.toLocaleUpperCase()}`} is now disabled for the user ${user.name}.`);\r\n          }\r\n        }\r\n        \r\n      }\r\n    break;\r\n    \r\n    case \"GM.CREATE\":\r\n      if (argsArr.length < 1) {\r\n        bot.world.send(\"You didn't specify enough arguments.\\nExample: /GM-CREATE TEST\\nThis would create a group named TEST. Groups are CaSe SeNsItIvE and cannot contain spaces!\");\r\n      } else {\r\n        if (manager.groups.get(args)) {\r\n          bot.world.send(\"This group already exists! Choose another name.\");\r\n        } else if (args.includes(\" \")) {\r\n          bot.world.send(\"Group names cannot include spaces!\");\r\n        } else {\r\n          manager.groups.add({ name: args });\r\n          bot.world.send(`The group ${args} was created!`);\r\n        }\r\n      }\r\n    break;\r\n\r\n    case \"GM.DESTROY\":\r\n      if (argsArr.length < 1) {\r\n        bot.world.send(\"You didn't specify enough arguments.\\nExample: /GM-DESTROY TEST\\nThis would delete any group named TEST. Groups are CaSe SeNsItIvE!\");\r\n      } else {\r\n        const group = manager.groups.get(args) as Group;\r\n        if (group) {\r\n          group.delete();\r\n          bot.world.send(`Deleted the group ${group.name}.`);\r\n        } else {\r\n          bot.world.send(\"This group does not exist.\");\r\n        }\r\n      }\r\n    break;\r\n\r\n    case \"GM.LIST\":\r\n      if (argsArr.length < 1) {\r\n        bot.world.send(\"You didn't specify enough arguments.\\nExample: /GM-LIST TEST\\nThis would list the last 50 players of the group TEST.\");\r\n      } else {\r\n        const group = manager.groups.get(args) as Group;\r\n        if (group) {\r\n          bot.world.send(`\\n${group.name}:\\n${Array.from(group.players).slice(-50).reverse().map(player => player.name).join(\", \")}`);\r\n        } else {\r\n          bot.world.send(\"This group does not exist.\");\r\n        }\r\n      }\r\n    break;\r\n  }\r\n};","import { callback } from \"./GroupManagementHandler\";\r\nimport { ExtensionPermission } from \"..\";\r\n\r\ninterface GroupManagementExtensionPermission extends ExtensionPermission {\r\n  display: {\r\n    category: \"Group Management/General Commands\"|\"Group Management/Group Commands\"|\"Group Management/Permission Commands\",\r\n    name: string\r\n  }\r\n}\r\n\r\nexport const GroupManagementPermissions : GroupManagementExtensionPermission[] = [\r\n  {\r\n    callback,\r\n    id: \"GM.HELP\",\r\n    command: \"GM-HELP\",\r\n    display: {\r\n      category: \"Group Management/General Commands\",\r\n      name: \"View the /GM-help message\"\r\n    },\r\n  },\r\n  {\r\n    callback,\r\n    id: \"GM.CHECK\",\r\n    command: \"GM-CHECK\",\r\n    display: {\r\n      category: \"Group Management/General Commands\",\r\n      name: \"Check if a player has permission to use a command with /GM-check\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"GM.USER\",\r\n    command: \"GM-USER\",\r\n    display: {\r\n      category: \"Group Management/General Commands\",\r\n      name: \"View all the groups/user specific permissions a user has with /GM-user\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"GM.GROUP\",\r\n    command: \"GM-GROUP\",\r\n    display: {\r\n      category: \"Group Management/Group Commands\",\r\n      name: \"View information about a group with /GM-group\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"GM.ADD\",\r\n    command: \"GM-ADD\",\r\n    display: {\r\n      category: \"Group Management/Group Commands\",\r\n      name: \"Add others to a group with /GM-add\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"GM.REMOVE\",\r\n    command: \"GM-REMOVE\",\r\n    display: {\r\n      category: \"Group Management/Group Commands\",\r\n      name: \"Remove others from a group with /GM-remove\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"GM.GSET\",\r\n    command: \"GM-GSET\",\r\n    display: {\r\n      category: \"Group Management/Permission Commands\",\r\n      name: \"Set a permission of a group with /GM-gset\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"GM.USET\",\r\n    command: \"GM-USET\",\r\n    display: {\r\n      category: \"Group Management/Permission Commands\",\r\n      name: \"Set a permission of a user with /GM-uset\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"GM.CREATE\",\r\n    command: \"GM-CREATE\",\r\n    display: {\r\n      category: \"Group Management/Group Commands\",\r\n      name: \"Create a group with /GM-create\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"GM.DESTORY\",\r\n    command: \"GM-DESTORY\",\r\n    display: {\r\n      category: \"Group Management/Group Commands\",\r\n      name: \"Destroy a group with /GM-destory\"\r\n    }\r\n  },\r\n  {\r\n    callback,\r\n    id: \"GM.LIST\",\r\n    command: \"GM-LIST\",\r\n    display: {\r\n      category: \"Group Management/Group Commands\",\r\n      name: \"View a grouplist with /GM-list\"\r\n    }\r\n  }\r\n  \r\n];","import { MessageBot, Player } from \"@bhmb/bot\";\nimport { GroupManagement } from \"./GroupManagement\";\nimport { BlockheadPermissions } from \"./Extensions/Blockheads\";\nimport { GroupManagementPermissions } from \"./Extensions/GroupManagement\";\n\nexport interface ExtensionPermission {\n  callback: (player: Player, args: string, bot : MessageBot, id: string) => void;\n  id: string;\n  command: string;\n  display: {\n    category: string;\n    name: string;\n  };\n  ignore?: {\n    admin?: boolean,\n    mod?: boolean,\n    staff?: boolean,\n    owner?: boolean\n  }\n};\n\nconst EXTENSION_ID = \"dapersonmgn/groupManagement\";\n\nMessageBot.registerExtension(EXTENSION_ID, ex => {\n  const GM = new GroupManagement(ex);\n  \n  for (const permission of BlockheadPermissions) {\n    const {id, command, callback, ignore} = permission;\n    GM.permissions.add({\n      id,\n      command,\n      callback,\n      ignore,\n      extension: EXTENSION_ID,\n      category: permission.display.category,\n      name: permission.display.name\n    });\n  }\n\n  for (const permission of GroupManagementPermissions) {\n    const {id, command, callback, ignore} = permission;\n    GM.permissions.add({\n      id,\n      command,\n      callback,\n      ignore,\n      extension: EXTENSION_ID,\n      category: permission.display.category,\n      name: permission.display.name\n    });\n  }\n\n  if (!GM.groups.get(\"Administrator\")) {\n    GM.groups.add({\n      name: \"Administrator\",\n      permissions: {\n        allowed: [\"BH.HELP\", \"BH.PLAYERS\", \"BH.KICK_MOD\", \"BH.KICK_ADMIN\", \"BH.KICK\", \"BH.BAN_MOD\", \"BH.BAN_ADMIN\", \"BH.BAN\", \"BH.BAN_NO_DEVICE_MOD\", \"BH.BAN_NO_DEVICE_ADMIN\", \"BH.BAN_NO_DEVICE\", \"BH.UNBAN\", \"BH.WHITELIST\", \"BH.UNWHITELIST\", \"BH.LIST_MODLIST\", \"BH.LIST_BLACKLIST\", \"BH.LIST_WHITELIST\", \"BH.LIST_ADMINLIST\", \"BH.LOADLISTS\", \"BH.STOP\", \"BH.PVPON\", \"BH.PVPOFF\", \"BH.MOD\", \"BH.UNMOD\", \"BH.ADMIN\", \"BH.UNADMIN\", \"BH.CLEAR_MODLIST\", \"BH.CLEAR_ADMINLIST\", \"BH.CLEAR_WHITELIST\", \"BH.CLEAR_BLACKLIST\"],\n        disabled: [\"BH.HELP\", \"BH.PLAYERS\", \"BH.KICK_MOD\", \"BH.KICK_ADMIN\", \"BH.KICK\", \"BH.BAN_MOD\", \"BH.BAN_ADMIN\", \"BH.BAN\", \"BH.BAN_NO_DEVICE_MOD\", \"BH.BAN_NO_DEVICE_ADMIN\", \"BH.BAN_NO_DEVICE\", \"BH.UNBAN\", \"BH.WHITELIST\", \"BH.UNWHITELIST\", \"BH.LIST_MODLIST\", \"BH.LIST_BLACKLIST\", \"BH.LIST_WHITELIST\", \"BH.LIST_ADMINLIST\", \"BH.LOADLISTS\", \"BH.STOP\", \"BH.PVPON\", \"BH.PVPOFF\", \"BH.MOD\", \"BH.UNMOD\", \"BH.ADMIN\", \"BH.UNADMIN\", \"BH.CLEAR_MODLIST\", \"BH.CLEAR_ADMINLIST\", \"BH.CLEAR_WHITELIST\", \"BH.CLEAR_BLACKLIST\"]\n      },\n      managed: true\n    });\n  }\n  if (!GM.groups.get(\"Moderator\")) {\n    GM.groups.add({\n      name: \"Moderator\",\n      permissions: {\n        allowed: [\"BH.HELP\", \"BH.PLAYERS\", \"BH.KICK\", \"BH.BAN\", \"BH.BAN_NO_DEVICE\", \"BH.UNBAN\", \"BH.WHITELIST\", \"BH.UNWHITELIST\", \"BH.LIST_BLACKLIST\", \"BH.LIST_WHITELIST\"],\n        disabled: [\"BH.HELP\", \"BH.PLAYERS\", \"BH.KICK\", \"BH.BAN\", \"BH.BAN_NO_DEVICE\", \"BH.UNBAN\", \"BH.WHITELIST\", \"BH.UNWHITELIST\", \"BH.LIST_BLACKLIST\", \"BH.LIST_WHITELIST\"]\n      },\n      managed: true\n    });\n  }\n  if (!GM.groups.get(\"Anyone\")) {\n    GM.groups.add({\n      name: \"Anyone\",\n      permissions: {\n        allowed: [],\n        disabled: []\n      },\n      managed: true\n    });\n  }\n\n  ex.exports.manager = GM;\n\n  /**\n   * Listener for when an extension is registered.\n   * @param extension Name of the extension.\n   */\n  const handleExtensionRegister = (extension : string) => {\n    const extensionExports = ex.bot.getExports(extension);\n    if (extensionExports && extensionExports.groupManagement) {\n\n      const permissions : ExtensionPermission[] = extensionExports.groupManagement;\n      for (const permissionData of permissions) {\n        GM.permissions.add({\n          extension,\n          category: permissionData.display.category,\n          name: permissionData.display.name,\n          id: permissionData.id,\n          command: permissionData.command,\n          callback: permissionData.callback,\n          ignore: permissionData.ignore\n        });\n      }\n\n    }\n  };\n\n  /**\n   * Listener for when an extension is deregistered.\n   * @param extension Name of the extension.\n   */\n  const handleExtensionDeregister = (extension : string) => {\n    const permissions = GM.permissions.getExtensionPermissions(extension);\n    for (const permission of permissions) {\n      permission.delete();\n    }\n  };\n\n  /**\n   * Loads all extensions that were loaded before this extension.\n   */\n  const handleExistingExtensions = () => {\n    const extensions = MessageBot.extensions;\n    for (const extension of extensions) {\n      handleExtensionRegister(extension);\n    }\n  };\n\n  ex.remove = () => {\n    MessageBot.extensionRegistered.unsub(handleExtensionRegister);\n    MessageBot.extensionDeregistered.unsub(handleExtensionDeregister);\n    GM.ui.uninstall();\n  };\n\n  ex.uninstall = () => {\n    GM.uninstall();\n    MessageBot.extensionRegistered.unsub(handleExtensionRegister);\n    MessageBot.extensionDeregistered.unsub(handleExtensionDeregister);\n  };\n\n  MessageBot.extensionRegistered.sub(handleExtensionRegister);\n  MessageBot.extensionDeregistered.sub(handleExtensionDeregister);\n  handleExistingExtensions();\n});"],"names":["SAVE_KEY","MessageBot","bot","EXTENSION_ID","helpMessages","callback"],"mappings":"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"}